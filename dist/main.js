!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i(1);var n,o=i(2);new((n=o)&&n.__esModule?n:{default:n}).default},function(t,e,i){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(3),r=(n=s)&&n.__esModule?n:{default:n};var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.draggableAttr="data-pd-draggable-item",this.containerAttr="data-pd-drop-container",this.duration=300,this.dragEl=null,this.dropEl=null,this.ghostEl=null,this.groupId="",this.dragging=!1,this.touchTimeout=null,this.startPoint=null,this.movePoint=null,this.onTouchTimeout=this.onTouchTimeout.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.eventOptions=this.getEventOptions(),this.body=document.body,this.scrollEl=document.scrollingElement||document.documentElement||document,this.bindPassiveEvents()}return o(t,[{key:"getEventOptions",value:function(){var t=!1;try{var e=function(){},i=Object.defineProperty({},"passive",{get:function(){return t=!0,!0}});window.addEventListener("check-passive",e,i),window.removeEventListener("check-passive",e,i)}catch(e){t=!1}return!!t&&{passive:!1}}},{key:"getPoint",value:function(t){var e=t.touch||!!t.touches&&t.touches[0];return e||(e=t),new r.default(e.clientX,e.clientY)}},{key:"getRect",value:function(t){var e=t.getBoundingClientRect();return{x:e.x||e.left,y:e.y||e.top,width:e.width,height:e.height}}},{key:"getMidpoint",value:function(t){var e=this.getRect(t);return new r.default(e.width/2+e.x,e.height/2+e.y)}},{key:"getRectDiff",value:function(t,e){var i=this.getRect(t);return{x:e.x-i.x,y:e.y-i.y,width:e.width-i.width,height:e.height-i.height}}},{key:"pointToEl",value:function(t){return document.elementFromPoint(t.x,t.y)}},{key:"each",value:function(t,e){for(var i=t.length,n=0;n<i;n++){var o=e(t[n],n);if(!0!==o&&!1===o)break}}},{key:"eachInContainers",value:function(t,e,i){var n=this;this.each(t,function(t){e(t),n.each(t.children,function(t){i(t)})})}},{key:"closest",value:function(t,e){for(;t;){if(e(t))return t;t=t.parentElement}return null}},{key:"closestByAttr",value:function(t,e,i){return this.closest(t,function(t){var n=t.getAttribute(e);return i?n===i:null!==n})}},{key:"closestContainer",value:function(t,e){return this.closestByAttr(t,this.containerAttr,e)}},{key:"closestDraggable",value:function(t,e){return this.closestByAttr(t,this.draggableAttr,e)}},{key:"bindPassiveEvents",value:function(){document.addEventListener("mousedown",this.onMouseDown,this.eventOptions),document.addEventListener("touchstart",this.onTouchStart,this.eventOptions)}},{key:"bindActiveEvents",value:function(){document.addEventListener("mousemove",this.onMouseMove,this.eventOptions),document.addEventListener("mouseup",this.onMouseUp,this.eventOptions),document.addEventListener("touchmove",this.onTouchMove,this.eventOptions),document.addEventListener("touchend",this.onTouchEnd,this.eventOptions)}},{key:"unbindActiveEvents",value:function(){document.removeEventListener("mousemove",this.onMouseMove,this.eventOptions),document.removeEventListener("mouseup",this.onMouseUp,this.eventOptions),document.removeEventListener("touchmove",this.onTouchMove,this.eventOptions),document.removeEventListener("touchend",this.onTouchEnd,this.eventOptions)}},{key:"onMouseDown",value:function(t){var e=this.getPoint(t),i=this.closestDraggable(this.pointToEl(e));i&&(this.dragEl=i,this.startPoint=e,this.bindActiveEvents(),this.dragStart(e))}},{key:"onMouseMove",value:function(t){var e=this.getPoint(t);t.preventDefault(),this.dragMove(e)}},{key:"onMouseUp",value:function(){this.dragEnd(),this.unbindActiveEvents()}},{key:"onTouchTimeout",value:function(){this.dragStart(this.startPoint)}},{key:"onTouchStart",value:function(t){var e=this.getPoint(t),i=this.closestDraggable(this.pointToEl(e));i&&(this.dragEl=i,this.startPoint=e,this.bindActiveEvents(),this.touchTimeout=setTimeout(this.onTouchTimeout,200))}},{key:"onTouchMove",value:function(t){var e=this.getPoint(t);if(!this.dragging)return this.startPoint.checkAxisOffset(e,4)?(clearTimeout(this.touchTimeout),this.unbindActiveEvents(),void this.dragEnd()):void(this.movePoint=e);t.preventDefault(),this.dragMove(e)}},{key:"onTouchEnd",value:function(){clearTimeout(this.touchTimeout),this.unbindActiveEvents(),this.dragEnd()}},{key:"createGhost",value:function(){if(null!==this.dragEl){var t=this.getRect(this.dragEl);this.ghostEl=this.dragEl.cloneNode(!0),this.ghostEl.style.position="absolute",this.ghostEl.style.top=t.y-this.startPoint.y+"px",this.ghostEl.style.left=t.x-this.startPoint.x+"px",this.ghostEl.style.width=t.width+"px",this.ghostEl.style.height=t.height+"px",this.ghostEl.style.pointerEvents="none",this.ghostEl.style.transition="",this.ghostEl.style.transform="",this.updateGhostPosition(this.startPoint),this.body.appendChild(this.ghostEl),this.ghostEl.setAttribute("data-pd-ghost","")}}},{key:"updateGhostPosition",value:function(t){var e=new r.default(this.scrollEl.scrollLeft,this.scrollEl.scrollTop).add(t);this.ghostEl.style.transform="translate("+e.x+"px, "+e.y+"px)"}},{key:"destroyGhost",value:function(){null!==this.ghostEl&&(this.body.removeChild(this.ghostEl),this.ghostEl=null)}},{key:"dragStart",value:function(){this.groupId=this.dragEl.getAttribute(this.draggableAttr),null!==this.groupId&&(this.dragging=!0,this.dropEl=this.closestContainer(this.dragEl),this.movePoint&&(this.startPoint=this.movePoint),this.createGhost(),this.dropEl.style.transition="",this.dropEl.style.height="",this.dropEl.style.width="",this.dragEl.setAttribute("data-pd-drag",""))}},{key:"dragMove",value:function(t){var e=this;this.updateGhostPosition(t);var i=this.pointToEl(t),n=this.closestContainer(i,this.groupId);if(n&&!this.closest(n,function(t){return t===e.dragEl})){if(n!==this.dropEl){var o=this.dropEl;return this.dropEl=n,this.beforeSwap([n,o]),this.dropEl.appendChild(this.dragEl),void this.afterSwap([n,o])}var s=this.closestDraggable(i);if(s&&s!==this.dragEl&&s.parentElement===this.dropEl){var r=s.nextElementSibling,h=r||s.previousElementSibling;if(h){var a=this.getMidpoint(s),u=this.getMidpoint(h).diff(a),l=Math.abs(u.x)>Math.abs(u.y)?"x":"y";if(t[l]<a[l]){if(this.dragEl.nextElementSibling===s)return;return this.beforeSwap([n]),this.dropEl.insertBefore(this.dragEl,s),void this.afterSwap([n])}if(r){if(this.dragEl===r)return;return this.beforeSwap([n]),this.dropEl.insertBefore(this.dragEl,r),void this.afterSwap([n])}this.beforeSwap([n]),this.dropEl.appendChild(this.dragEl),this.afterSwap([n])}}}}},{key:"dragEnd",value:function(){this.dragging=!1,this.startPoint=null,this.movePoint=null,this.groupId="",this.destroyGhost(),this.dragEl.removeAttribute("data-pd-drag"),this.dragEl=null,this.dropEl=null}},{key:"beforeSwap",value:function(t){var e=this.getRect.bind(this);this.eachInContainers(t,function(t){t._pd_elRect=e(t)},function(t){t._pd_elRect=e(t)})}},{key:"afterSwap",value:function(t){var e=this,i=this.getRectDiff.bind(this),n=this.getRect.bind(this);clearTimeout(this.animationTimeout),this.eachInContainers(t,function(t){var e=n(t);t.style.transition="none",e.height!==t._pd_elRect.height&&(t.style.height=t._pd_elRect.height+"px",t._pd_animation=!0),e.width!==t._pd_elRect.width&&(t.style.width=t._pd_elRect.width+"px",t._pd_animation=!0),t._pd_elRect=e},function(t){if(!t._pd_elRect)return!0;var e=i(t,t._pd_elRect);t.style.transition="none",0===e.y&&0===e.x||(t.style.transform="translate("+e.x+"px, "+e.y+"px)",t._pd_animation=!0),t._pd_elRect=void 0}),this.dropEl.offsetWidth,this.eachInContainers(t,function(t){t._pd_animation&&(t.style.transition="height "+e.duration+"ms ease-out, width "+e.duration+"ms ease-out",t.style.height=t._pd_elRect.height+"px",t.style.width=t._pd_elRect.width+"px",t._pd_animation=void 0),t._pd_elRect=void 0},function(t){t._pd_animation&&(t.style.transition="transform "+e.duration+"ms ease-out",t.style.transform="translate(0, 0)",t._pd_animation=void 0)}),this.animationTimeout=setTimeout(function(){e.eachInContainers(t,function(t){t.style.transition="",t.style.height="",t.style.width=""},function(t){t.style.transition="",t.style.transform=""})},this.duration)}}]),t}();e.default=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i}return n(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"diff",value:function(e){return new t(e.x-this.x,e.y-this.y)}},{key:"checkAxisOffset",value:function(t,e){return Math.abs(t.x-this.x)>e||Math.abs(t.y-this.y)>e}}]),t}();e.default=o}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RyYWdnYWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcG9pbnQuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfZHJhZ2dhYmxlIiwiRHJhZ2dhYmxlIiwiX3BvaW50IiwiUG90YXRvRHJhZ2dhYmxlIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImRyYWdnYWJsZUF0dHIiLCJjb250YWluZXJBdHRyIiwiZHVyYXRpb24iLCJkcmFnRWwiLCJkcm9wRWwiLCJnaG9zdEVsIiwiZ3JvdXBJZCIsImRyYWdnaW5nIiwidG91Y2hUaW1lb3V0Iiwic3RhcnRQb2ludCIsIm1vdmVQb2ludCIsIm9uVG91Y2hUaW1lb3V0Iiwib25Ub3VjaFN0YXJ0Iiwib25Ub3VjaE1vdmUiLCJvblRvdWNoRW5kIiwib25Nb3VzZURvd24iLCJvbk1vdXNlTW92ZSIsIm9uTW91c2VVcCIsImV2ZW50T3B0aW9ucyIsImdldEV2ZW50T3B0aW9ucyIsImJvZHkiLCJkb2N1bWVudCIsInNjcm9sbEVsIiwic2Nyb2xsaW5nRWxlbWVudCIsImRvY3VtZW50RWxlbWVudCIsImJpbmRQYXNzaXZlRXZlbnRzIiwicGFzc2l2ZVN1cHBvcnQiLCJjYiIsIm9wdCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZSIsInBhc3NpdmUiLCJwb2ludCIsInRvdWNoIiwidG91Y2hlcyIsIlBvaW50IiwiY2xpZW50WCIsImNsaWVudFkiLCJlbCIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ4IiwibGVmdCIsInkiLCJ0b3AiLCJ3aWR0aCIsImhlaWdodCIsImVsUmVjdCIsImdldFJlY3QiLCJlbGVtZW50RnJvbVBvaW50IiwiYXJyYXkiLCJmbiIsImxlbmd0aCIsInJlc3VsdCIsImNvbnRhaW5lcnMiLCJkcm9wRWxGbiIsImRyYWdFbEZuIiwiX3RoaXMiLCJlYWNoIiwiY29udGFpbmVyIiwiY2hpbGRyZW4iLCJtYXRjaCIsInBhcmVudEVsZW1lbnQiLCJhdHRyTmFtZSIsImF0dHJWYWx1ZSIsImNsb3Nlc3QiLCJhdHRyIiwiZ2V0QXR0cmlidXRlIiwiY2xvc2VzdEJ5QXR0ciIsImdldFBvaW50IiwiY2xvc2VzdERyYWdnYWJsZSIsInBvaW50VG9FbCIsImJpbmRBY3RpdmVFdmVudHMiLCJkcmFnU3RhcnQiLCJwcmV2ZW50RGVmYXVsdCIsImRyYWdNb3ZlIiwiZHJhZ0VuZCIsInVuYmluZEFjdGl2ZUV2ZW50cyIsInNldFRpbWVvdXQiLCJjaGVja0F4aXNPZmZzZXQiLCJjbGVhclRpbWVvdXQiLCJkcmFnRWxSZWN0IiwiY2xvbmVOb2RlIiwic3R5bGUiLCJwb3NpdGlvbiIsInBvaW50ZXJFdmVudHMiLCJ0cmFuc2l0aW9uIiwidHJhbnNmb3JtIiwidXBkYXRlR2hvc3RQb3NpdGlvbiIsImFwcGVuZENoaWxkIiwic2V0QXR0cmlidXRlIiwibmV3UG9pbnQiLCJzY3JvbGxMZWZ0Iiwic2Nyb2xsVG9wIiwiYWRkIiwicmVtb3ZlQ2hpbGQiLCJjbG9zZXN0Q29udGFpbmVyIiwiY3JlYXRlR2hvc3QiLCJfdGhpczIiLCJvdmVyRWwiLCJwcmV2RHJvcEVsIiwiYmVmb3JlU3dhcCIsImFmdGVyU3dhcCIsIm5leHRFbCIsIm5leHRFbGVtZW50U2libGluZyIsInNpYmxpbmdFbCIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJkcmFnTWlkcG9pbnQiLCJnZXRNaWRwb2ludCIsImRpZmYiLCJheGlzIiwiTWF0aCIsImFicyIsImluc2VydEJlZm9yZSIsImRlc3Ryb3lHaG9zdCIsInJlbW92ZUF0dHJpYnV0ZSIsImVhY2hJbkNvbnRhaW5lcnMiLCJfcGRfZWxSZWN0IiwiX3RoaXMzIiwiZ2V0UmVjdERpZmYiLCJhbmltYXRpb25UaW1lb3V0IiwiX3BkX2FuaW1hdGlvbiIsImVsUmVjdERpZmYiLCJ1bmRlZmluZWQiLCJvZmZzZXRXaWR0aCIsImxpbWl0Il0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsWUFBQSxDQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQXJCLEVBQUFxQixJ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OEMsR0FBS2tGLHFCQUloRTFGIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgJy4vc2Nzcy9tYWluLnNjc3MnO1xuaW1wb3J0IERyYWdnYWJsZSBmcm9tICcuL2RyYWdnYWJsZSc7XG5cbm5ldyBEcmFnZ2FibGUoKTtcbiIsImltcG9ydCBQb2ludCBmcm9tICcuL3BvaW50JztcblxuY2xhc3MgUG90YXRvRHJhZ2dhYmxlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5kcmFnZ2FibGVBdHRyID0gJ2RhdGEtcGQtZHJhZ2dhYmxlLWl0ZW0nO1xuICAgIHRoaXMuY29udGFpbmVyQXR0ciA9ICdkYXRhLXBkLWRyb3AtY29udGFpbmVyJztcbiAgICB0aGlzLmR1cmF0aW9uID0gMzAwO1xuXG4gICAgdGhpcy5kcmFnRWwgPSBudWxsO1xuICAgIHRoaXMuZHJvcEVsID0gbnVsbDtcbiAgICB0aGlzLmdob3N0RWwgPSBudWxsO1xuXG4gICAgdGhpcy5ncm91cElkID0gJyc7XG5cbiAgICB0aGlzLmRyYWdnaW5nID0gZmFsc2U7XG4gICAgdGhpcy50b3VjaFRpbWVvdXQgPSBudWxsO1xuICAgIHRoaXMuc3RhcnRQb2ludCA9IG51bGw7XG4gICAgdGhpcy5tb3ZlUG9pbnQgPSBudWxsO1xuXG4gICAgdGhpcy5vblRvdWNoVGltZW91dCA9IHRoaXMub25Ub3VjaFRpbWVvdXQuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uVG91Y2hTdGFydCA9IHRoaXMub25Ub3VjaFN0YXJ0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5vblRvdWNoTW92ZSA9IHRoaXMub25Ub3VjaE1vdmUuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uVG91Y2hFbmQgPSB0aGlzLm9uVG91Y2hFbmQuYmluZCh0aGlzKTtcblxuICAgIHRoaXMub25Nb3VzZURvd24gPSB0aGlzLm9uTW91c2VEb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbk1vdXNlTW92ZSA9IHRoaXMub25Nb3VzZU1vdmUuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uTW91c2VVcCA9IHRoaXMub25Nb3VzZVVwLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLmV2ZW50T3B0aW9ucyA9IHRoaXMuZ2V0RXZlbnRPcHRpb25zKCk7XG4gICAgdGhpcy5ib2R5ID0gZG9jdW1lbnQuYm9keTtcbiAgICB0aGlzLnNjcm9sbEVsID0gZG9jdW1lbnQuc2Nyb2xsaW5nRWxlbWVudCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgfHwgZG9jdW1lbnQ7XG5cbiAgICB0aGlzLmJpbmRQYXNzaXZlRXZlbnRzKCk7XG4gIH1cblxuICBnZXRFdmVudE9wdGlvbnMoKSB7XG4gICAgbGV0IHBhc3NpdmVTdXBwb3J0ID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNiID0gKCkgPT4ge307XG4gICAgICBjb25zdCBvcHQgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdwYXNzaXZlJywge1xuICAgICAgICBnZXQoKSB7IHBhc3NpdmVTdXBwb3J0ID0gdHJ1ZTsgcmV0dXJuIHRydWU7IH1cbiAgICAgIH0pO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NoZWNrLXBhc3NpdmUnLCBjYiwgb3B0KTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGVjay1wYXNzaXZlJywgY2IsIG9wdCk7XG4gICAgfSBjYXRjaCAoZSkgeyBwYXNzaXZlU3VwcG9ydCA9IGZhbHNlOyB9XG4gICAgcmV0dXJuIHBhc3NpdmVTdXBwb3J0ID8geyBwYXNzaXZlOiBmYWxzZSB9IDogZmFsc2U7XG4gIH1cblxuICBnZXRQb2ludChlKSB7XG4gICAgbGV0IHBvaW50ID0gZS50b3VjaCB8fCAoZS50b3VjaGVzID8gZS50b3VjaGVzWyAwIF0gOiBmYWxzZSk7XG4gICAgaWYgKCFwb2ludCkgcG9pbnQgPSBlO1xuICAgIHJldHVybiBuZXcgUG9pbnQocG9pbnQuY2xpZW50WCwgcG9pbnQuY2xpZW50WSk7XG4gIH1cblxuICBnZXRSZWN0KGVsKSB7XG4gICAgY29uc3QgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiB7XG4gICAgICB4OiByZWN0LnggfHwgcmVjdC5sZWZ0LFxuICAgICAgeTogcmVjdC55IHx8IHJlY3QudG9wLFxuICAgICAgd2lkdGg6IHJlY3Qud2lkdGgsXG4gICAgICBoZWlnaHQ6IHJlY3QuaGVpZ2h0LFxuICAgIH07XG4gIH1cblxuICBnZXRNaWRwb2ludChlbCkge1xuICAgIGNvbnN0IGVsUmVjdCA9IHRoaXMuZ2V0UmVjdChlbCk7XG4gICAgcmV0dXJuIG5ldyBQb2ludChlbFJlY3Qud2lkdGggLyAyICsgZWxSZWN0LngsIGVsUmVjdC5oZWlnaHQgLyAyICsgZWxSZWN0LnkpO1xuICB9XG5cbiAgZ2V0UmVjdERpZmYoZWwsIGVsUmVjdCkge1xuICAgIGNvbnN0IHJlY3QgPSB0aGlzLmdldFJlY3QoZWwpO1xuICAgIHJldHVybiB7XG4gICAgICB4OiBlbFJlY3QueCAtIHJlY3QueCxcbiAgICAgIHk6IGVsUmVjdC55IC0gcmVjdC55LFxuICAgICAgd2lkdGg6IGVsUmVjdC53aWR0aCAtIHJlY3Qud2lkdGgsXG4gICAgICBoZWlnaHQ6IGVsUmVjdC5oZWlnaHQgLSByZWN0LmhlaWdodCxcbiAgICB9O1xuICB9XG5cbiAgcG9pbnRUb0VsKHBvaW50KSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQocG9pbnQueCwgcG9pbnQueSk7XG4gIH1cblxuICBlYWNoKGFycmF5LCBmbikge1xuICAgIGNvbnN0IGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBmbihhcnJheVtpXSwgaSk7XG4gICAgICBpZiAocmVzdWx0ID09PSB0cnVlKSBjb250aW51ZTtcbiAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSBicmVhaztcbiAgICB9XG4gIH1cblxuICBlYWNoSW5Db250YWluZXJzKGNvbnRhaW5lcnMsIGRyb3BFbEZuLCBkcmFnRWxGbikge1xuICAgIHRoaXMuZWFjaChjb250YWluZXJzLCBjb250YWluZXIgPT4ge1xuICAgICAgZHJvcEVsRm4oY29udGFpbmVyKTtcbiAgICAgIHRoaXMuZWFjaChjb250YWluZXIuY2hpbGRyZW4sIGVsID0+IHtcbiAgICAgICAgZHJhZ0VsRm4oZWwpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBjbG9zZXN0KGVsLCBtYXRjaCkge1xuICAgIGZvciAoO2VsOykge1xuICAgICAgaWYgKG1hdGNoKGVsKSkgcmV0dXJuIGVsO1xuICAgICAgZWwgPSBlbC5wYXJlbnRFbGVtZW50O1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNsb3Nlc3RCeUF0dHIoZWwsIGF0dHJOYW1lLCBhdHRyVmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5jbG9zZXN0KGVsLCAoZWwpID0+IHtcbiAgICAgIGNvbnN0IGF0dHIgPSBlbC5nZXRBdHRyaWJ1dGUoYXR0ck5hbWUpO1xuICAgICAgcmV0dXJuIGF0dHJWYWx1ZSA/IGF0dHIgPT09IGF0dHJWYWx1ZSA6IGF0dHIgIT09IG51bGw7XG4gICAgfSk7XG4gIH1cblxuICBjbG9zZXN0Q29udGFpbmVyKGVsLCBncm91cElkKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xvc2VzdEJ5QXR0cihlbCwgdGhpcy5jb250YWluZXJBdHRyLCBncm91cElkKTtcbiAgfVxuXG4gIGNsb3Nlc3REcmFnZ2FibGUoZWwsIGdyb3VwSWQpIHtcbiAgICByZXR1cm4gdGhpcy5jbG9zZXN0QnlBdHRyKGVsLCB0aGlzLmRyYWdnYWJsZUF0dHIsIGdyb3VwSWQpO1xuICB9XG5cbiAgYmluZFBhc3NpdmVFdmVudHMoKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93biwgdGhpcy5ldmVudE9wdGlvbnMpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLm9uVG91Y2hTdGFydCwgdGhpcy5ldmVudE9wdGlvbnMpO1xuICB9XG5cbiAgYmluZEFjdGl2ZUV2ZW50cygpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlLCB0aGlzLmV2ZW50T3B0aW9ucyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwLCB0aGlzLmV2ZW50T3B0aW9ucyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5vblRvdWNoTW92ZSwgdGhpcy5ldmVudE9wdGlvbnMpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5vblRvdWNoRW5kLCB0aGlzLmV2ZW50T3B0aW9ucyk7XG4gIH1cblxuICB1bmJpbmRBY3RpdmVFdmVudHMoKSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSwgdGhpcy5ldmVudE9wdGlvbnMpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCwgdGhpcy5ldmVudE9wdGlvbnMpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMub25Ub3VjaE1vdmUsIHRoaXMuZXZlbnRPcHRpb25zKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMub25Ub3VjaEVuZCwgdGhpcy5ldmVudE9wdGlvbnMpO1xuICB9XG5cbiAgb25Nb3VzZURvd24oZSkge1xuICAgIGNvbnN0IHBvaW50ID0gdGhpcy5nZXRQb2ludChlKTtcblxuICAgIGNvbnN0IGRyYWdFbCA9IHRoaXMuY2xvc2VzdERyYWdnYWJsZSh0aGlzLnBvaW50VG9FbChwb2ludCkpO1xuICAgIGlmICghZHJhZ0VsKSByZXR1cm47XG5cbiAgICB0aGlzLmRyYWdFbCA9IGRyYWdFbDtcbiAgICB0aGlzLnN0YXJ0UG9pbnQgPSBwb2ludDtcblxuICAgIHRoaXMuYmluZEFjdGl2ZUV2ZW50cygpO1xuICAgIHRoaXMuZHJhZ1N0YXJ0KHBvaW50KTtcbiAgfVxuXG4gIG9uTW91c2VNb3ZlKGUpIHtcbiAgICBjb25zdCBwb2ludCA9IHRoaXMuZ2V0UG9pbnQoZSk7XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5kcmFnTW92ZShwb2ludCk7XG4gIH1cblxuICBvbk1vdXNlVXAoKSB7XG4gICAgdGhpcy5kcmFnRW5kKCk7XG4gICAgdGhpcy51bmJpbmRBY3RpdmVFdmVudHMoKTtcbiAgfVxuXG4gIG9uVG91Y2hUaW1lb3V0KCkge1xuICAgIHRoaXMuZHJhZ1N0YXJ0KHRoaXMuc3RhcnRQb2ludCk7XG4gIH1cblxuICBvblRvdWNoU3RhcnQoZSkge1xuICAgIGNvbnN0IHBvaW50ID0gdGhpcy5nZXRQb2ludChlKTtcblxuICAgIGNvbnN0IGRyYWdFbCA9IHRoaXMuY2xvc2VzdERyYWdnYWJsZSh0aGlzLnBvaW50VG9FbChwb2ludCkpO1xuICAgIGlmICghZHJhZ0VsKSByZXR1cm47XG5cbiAgICB0aGlzLmRyYWdFbCA9IGRyYWdFbDtcbiAgICB0aGlzLnN0YXJ0UG9pbnQgPSBwb2ludDtcblxuICAgIHRoaXMuYmluZEFjdGl2ZUV2ZW50cygpO1xuICAgIHRoaXMudG91Y2hUaW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLm9uVG91Y2hUaW1lb3V0LCAyMDApO1xuICB9XG5cbiAgb25Ub3VjaE1vdmUoZSkge1xuICAgIGNvbnN0IHBvaW50ID0gdGhpcy5nZXRQb2ludChlKTtcblxuICAgIGlmICghdGhpcy5kcmFnZ2luZykge1xuICAgICAgaWYgKHRoaXMuc3RhcnRQb2ludC5jaGVja0F4aXNPZmZzZXQocG9pbnQsIDQpKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRvdWNoVGltZW91dCk7XG4gICAgICAgIHRoaXMudW5iaW5kQWN0aXZlRXZlbnRzKCk7XG4gICAgICAgIHRoaXMuZHJhZ0VuZCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMubW92ZVBvaW50ID0gcG9pbnQ7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuZHJhZ01vdmUocG9pbnQpO1xuICB9XG5cbiAgb25Ub3VjaEVuZCgpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy50b3VjaFRpbWVvdXQpO1xuICAgIHRoaXMudW5iaW5kQWN0aXZlRXZlbnRzKCk7XG4gICAgdGhpcy5kcmFnRW5kKCk7XG4gIH1cblxuICBjcmVhdGVHaG9zdCgpIHtcbiAgICBpZiAodGhpcy5kcmFnRWwgPT09IG51bGwpIHJldHVybjtcblxuICAgIGNvbnN0IGRyYWdFbFJlY3QgPSB0aGlzLmdldFJlY3QodGhpcy5kcmFnRWwpO1xuICAgIHRoaXMuZ2hvc3RFbCA9IHRoaXMuZHJhZ0VsLmNsb25lTm9kZSh0cnVlKTtcbiAgICB0aGlzLmdob3N0RWwuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIHRoaXMuZ2hvc3RFbC5zdHlsZS50b3AgPSBgJHsoZHJhZ0VsUmVjdC55IC0gdGhpcy5zdGFydFBvaW50LnkpfXB4YDtcbiAgICB0aGlzLmdob3N0RWwuc3R5bGUubGVmdCA9IGAkeyhkcmFnRWxSZWN0LnggLSB0aGlzLnN0YXJ0UG9pbnQueCl9cHhgO1xuICAgIHRoaXMuZ2hvc3RFbC5zdHlsZS53aWR0aCA9IGAke2RyYWdFbFJlY3Qud2lkdGh9cHhgO1xuICAgIHRoaXMuZ2hvc3RFbC5zdHlsZS5oZWlnaHQgPSBgJHtkcmFnRWxSZWN0LmhlaWdodH1weGA7XG4gICAgdGhpcy5naG9zdEVsLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XG5cbiAgICAvLyByZXNldCBhZnRlciBhbmltYXRpb25cbiAgICB0aGlzLmdob3N0RWwuc3R5bGUudHJhbnNpdGlvbiA9ICcnO1xuICAgIHRoaXMuZ2hvc3RFbC5zdHlsZS50cmFuc2Zvcm0gPSAnJztcblxuICAgIHRoaXMudXBkYXRlR2hvc3RQb3NpdGlvbih0aGlzLnN0YXJ0UG9pbnQpO1xuXG4gICAgdGhpcy5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZ2hvc3RFbCk7XG5cbiAgICB0aGlzLmdob3N0RWwuc2V0QXR0cmlidXRlKCdkYXRhLXBkLWdob3N0JywgJycpO1xuICB9XG5cbiAgdXBkYXRlR2hvc3RQb3NpdGlvbihwb2ludCkge1xuICAgIGNvbnN0IG5ld1BvaW50ID0gbmV3IFBvaW50KHRoaXMuc2Nyb2xsRWwuc2Nyb2xsTGVmdCwgdGhpcy5zY3JvbGxFbC5zY3JvbGxUb3ApLmFkZChwb2ludCk7XG4gICAgdGhpcy5naG9zdEVsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtuZXdQb2ludC54fXB4LCAke25ld1BvaW50Lnl9cHgpYDtcbiAgfVxuXG4gIGRlc3Ryb3lHaG9zdCgpIHtcbiAgICBpZiAodGhpcy5naG9zdEVsID09PSBudWxsKSByZXR1cm47XG5cbiAgICB0aGlzLmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5naG9zdEVsKTtcblxuICAgIHRoaXMuZ2hvc3RFbCA9IG51bGw7XG4gIH1cblxuICBkcmFnU3RhcnQoKSB7ICAgIFxuICAgIHRoaXMuZ3JvdXBJZCA9IHRoaXMuZHJhZ0VsLmdldEF0dHJpYnV0ZSh0aGlzLmRyYWdnYWJsZUF0dHIpO1xuICAgIGlmICh0aGlzLmdyb3VwSWQgPT09IG51bGwpIHJldHVybjsgLy8gcHJvYmFibHkgbm90IG5lY2Vzc2FyeVxuXG4gICAgdGhpcy5kcmFnZ2luZyA9IHRydWU7XG5cbiAgICB0aGlzLmRyb3BFbCA9IHRoaXMuY2xvc2VzdENvbnRhaW5lcih0aGlzLmRyYWdFbCk7XG4gICAgaWYgKHRoaXMubW92ZVBvaW50KSB0aGlzLnN0YXJ0UG9pbnQgPSB0aGlzLm1vdmVQb2ludDtcblxuICAgIHRoaXMuY3JlYXRlR2hvc3QoKTtcblxuICAgIC8vIHJlc2V0IGFmdGVyIGFuaW1hdGlvblxuICAgIHRoaXMuZHJvcEVsLnN0eWxlLnRyYW5zaXRpb24gPSAnJztcbiAgICB0aGlzLmRyb3BFbC5zdHlsZS5oZWlnaHQgPSAnJztcbiAgICB0aGlzLmRyb3BFbC5zdHlsZS53aWR0aCA9ICcnO1xuXG4gICAgdGhpcy5kcmFnRWwuc2V0QXR0cmlidXRlKCdkYXRhLXBkLWRyYWcnLCAnJyk7XG4gIH1cblxuICBkcmFnTW92ZShwb2ludCkge1xuICAgIHRoaXMudXBkYXRlR2hvc3RQb3NpdGlvbihwb2ludCk7XG5cbiAgICBjb25zdCBvdmVyRWwgPSB0aGlzLnBvaW50VG9FbChwb2ludCk7XG5cbiAgICBjb25zdCBkcm9wRWwgPSB0aGlzLmNsb3Nlc3RDb250YWluZXIob3ZlckVsLCB0aGlzLmdyb3VwSWQpO1xuICAgIGlmICghZHJvcEVsKSByZXR1cm47XG5cbiAgICAvLyBkcm9wRWwgaW5zaWRlIGRyYWdFbFxuICAgIGlmICh0aGlzLmNsb3Nlc3QoZHJvcEVsLCBlbCA9PiBlbCA9PT0gdGhpcy5kcmFnRWwpKSByZXR1cm47XG5cbiAgICAvLyBvdGhlciBkcm9wRWxcbiAgICBpZiAoZHJvcEVsICE9PSB0aGlzLmRyb3BFbCkge1xuICAgICAgY29uc3QgcHJldkRyb3BFbCA9IHRoaXMuZHJvcEVsO1xuICAgICAgdGhpcy5kcm9wRWwgPSBkcm9wRWw7XG5cbiAgICAgIHRoaXMuYmVmb3JlU3dhcChbZHJvcEVsLCBwcmV2RHJvcEVsXSk7XG4gICAgICB0aGlzLmRyb3BFbC5hcHBlbmRDaGlsZCh0aGlzLmRyYWdFbCk7XG4gICAgICB0aGlzLmFmdGVyU3dhcChbZHJvcEVsLCBwcmV2RHJvcEVsXSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZHJhZ0VsID0gdGhpcy5jbG9zZXN0RHJhZ2dhYmxlKG92ZXJFbCk7XG4gICAgaWYgKCFkcmFnRWwpIHJldHVybjtcblxuICAgIC8vIHRoZSBzYW1lIGRyYWdFbFxuICAgIGlmIChkcmFnRWwgPT09IHRoaXMuZHJhZ0VsKSByZXR1cm47XG5cbiAgICAvLyBvdGhlciBkcm9wRWwsIGl0IHNob3VsZCBiZSB0aGUgc2FtZVxuICAgIGlmIChkcmFnRWwucGFyZW50RWxlbWVudCAhPT0gdGhpcy5kcm9wRWwgKSByZXR1cm47XG5cbiAgICBjb25zdCBuZXh0RWwgPSBkcmFnRWwubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIGNvbnN0IHNpYmxpbmdFbCA9IG5leHRFbCB8fCBkcmFnRWwucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICBpZiAoIXNpYmxpbmdFbCkgcmV0dXJuO1xuXG4gICAgY29uc3QgZHJhZ01pZHBvaW50ID0gdGhpcy5nZXRNaWRwb2ludChkcmFnRWwpO1xuICAgIGNvbnN0IGRpZmYgPSB0aGlzLmdldE1pZHBvaW50KHNpYmxpbmdFbCkuZGlmZihkcmFnTWlkcG9pbnQpO1xuICAgIGNvbnN0IGF4aXMgPSBNYXRoLmFicyhkaWZmLngpID4gTWF0aC5hYnMoZGlmZi55KSA/ICd4JyA6ICd5JztcblxuICAgIGlmIChwb2ludFtheGlzXSA8IGRyYWdNaWRwb2ludFtheGlzXSkge1xuICAgICAgLy8gcHJldmVudCB1bm5lY2Vzc2FyeSBpbnNlcnRcbiAgICAgIGlmICh0aGlzLmRyYWdFbC5uZXh0RWxlbWVudFNpYmxpbmcgPT09IGRyYWdFbCkgcmV0dXJuO1xuXG4gICAgICB0aGlzLmJlZm9yZVN3YXAoW2Ryb3BFbF0pO1xuICAgICAgdGhpcy5kcm9wRWwuaW5zZXJ0QmVmb3JlKHRoaXMuZHJhZ0VsLCBkcmFnRWwpO1xuICAgICAgdGhpcy5hZnRlclN3YXAoW2Ryb3BFbF0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChuZXh0RWwpIHtcbiAgICAgIC8vIHByZXZlbnQgdW5uZWNlc3NhcnkgaW5zZXJ0XG4gICAgICBpZiAodGhpcy5kcmFnRWwgPT09IG5leHRFbCkgcmV0dXJuO1xuXG4gICAgICB0aGlzLmJlZm9yZVN3YXAoW2Ryb3BFbF0pO1xuICAgICAgdGhpcy5kcm9wRWwuaW5zZXJ0QmVmb3JlKHRoaXMuZHJhZ0VsLCBuZXh0RWwpO1xuICAgICAgdGhpcy5hZnRlclN3YXAoW2Ryb3BFbF0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHRoZSBsYXN0IGluIGNvbnRhaW5lclxuICAgIHRoaXMuYmVmb3JlU3dhcChbZHJvcEVsXSk7XG4gICAgdGhpcy5kcm9wRWwuYXBwZW5kQ2hpbGQodGhpcy5kcmFnRWwpO1xuICAgIHRoaXMuYWZ0ZXJTd2FwKFtkcm9wRWxdKTtcbiAgfVxuXG4gIGRyYWdFbmQoKSB7XG4gICAgdGhpcy5kcmFnZ2luZyA9IGZhbHNlO1xuICAgIHRoaXMuc3RhcnRQb2ludCA9IG51bGw7XG4gICAgdGhpcy5tb3ZlUG9pbnQgPSBudWxsO1xuXG4gICAgdGhpcy5ncm91cElkID0gJyc7XG5cbiAgICB0aGlzLmRlc3Ryb3lHaG9zdCgpO1xuXG4gICAgdGhpcy5kcmFnRWwucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXBkLWRyYWcnKTtcbiAgICB0aGlzLmRyYWdFbCA9IG51bGw7XG4gICAgdGhpcy5kcm9wRWwgPSBudWxsO1xuICB9XG5cbiAgYmVmb3JlU3dhcChjb250YWluZXJzKSB7XG4gICAgY29uc3QgZ2V0UmVjdCA9IHRoaXMuZ2V0UmVjdC5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5lYWNoSW5Db250YWluZXJzKGNvbnRhaW5lcnMsIGRyb3BFbCA9PiB7XG4gICAgICBkcm9wRWwuX3BkX2VsUmVjdCA9IGdldFJlY3QoZHJvcEVsKTtcbiAgICB9LCBkcmFnRWwgPT4ge1xuICAgICAgZHJhZ0VsLl9wZF9lbFJlY3QgPSBnZXRSZWN0KGRyYWdFbCk7XG4gICAgfSk7XG4gIH1cblxuICBhZnRlclN3YXAoY29udGFpbmVycykge1xuICAgIGNvbnN0IGdldFJlY3REaWZmID0gdGhpcy5nZXRSZWN0RGlmZi5iaW5kKHRoaXMpLCBnZXRSZWN0ID0gdGhpcy5nZXRSZWN0LmJpbmQodGhpcyk7XG5cbiAgICBjbGVhclRpbWVvdXQodGhpcy5hbmltYXRpb25UaW1lb3V0KTtcblxuICAgIHRoaXMuZWFjaEluQ29udGFpbmVycyhjb250YWluZXJzLCBkcm9wRWwgPT4ge1xuICAgICAgY29uc3QgZWxSZWN0ID0gZ2V0UmVjdChkcm9wRWwpO1xuICAgICAgZHJvcEVsLnN0eWxlLnRyYW5zaXRpb24gPSAnbm9uZSc7XG4gICAgICBpZiAoZWxSZWN0LmhlaWdodCAhPT0gZHJvcEVsLl9wZF9lbFJlY3QuaGVpZ2h0KSB7XG4gICAgICAgIGRyb3BFbC5zdHlsZS5oZWlnaHQgPSBgJHtkcm9wRWwuX3BkX2VsUmVjdC5oZWlnaHR9cHhgO1xuICAgICAgICBkcm9wRWwuX3BkX2FuaW1hdGlvbiA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoZWxSZWN0LndpZHRoICE9PSBkcm9wRWwuX3BkX2VsUmVjdC53aWR0aCkge1xuICAgICAgICBkcm9wRWwuc3R5bGUud2lkdGggPSBgJHtkcm9wRWwuX3BkX2VsUmVjdC53aWR0aH1weGA7XG4gICAgICAgIGRyb3BFbC5fcGRfYW5pbWF0aW9uID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGRyb3BFbC5fcGRfZWxSZWN0ID0gZWxSZWN0O1xuICAgIH0sIGRyYWdFbCA9PiB7XG4gICAgICBpZiAoIWRyYWdFbC5fcGRfZWxSZWN0KSByZXR1cm4gdHJ1ZTtcbiAgICAgIGNvbnN0IGVsUmVjdERpZmYgPSBnZXRSZWN0RGlmZihkcmFnRWwsIGRyYWdFbC5fcGRfZWxSZWN0KTtcbiAgICAgIGRyYWdFbC5zdHlsZS50cmFuc2l0aW9uID0gJ25vbmUnO1xuICAgICAgaWYgKGVsUmVjdERpZmYueSAhPT0gMCB8fCBlbFJlY3REaWZmLnggIT09IDApIHtcbiAgICAgICAgZHJhZ0VsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtlbFJlY3REaWZmLnh9cHgsICR7ZWxSZWN0RGlmZi55fXB4KWA7XG4gICAgICAgIGRyYWdFbC5fcGRfYW5pbWF0aW9uID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGRyYWdFbC5fcGRfZWxSZWN0ID0gdW5kZWZpbmVkO1xuICAgIH0pO1xuXG4gICAgdGhpcy5kcm9wRWwub2Zmc2V0V2lkdGg7IC8vIGZvcmNlIHJlZmxvd1xuXG4gICAgdGhpcy5lYWNoSW5Db250YWluZXJzKGNvbnRhaW5lcnMsIGRyb3BFbCA9PiB7XG4gICAgICBpZiAoZHJvcEVsLl9wZF9hbmltYXRpb24pIHtcbiAgICAgICAgZHJvcEVsLnN0eWxlLnRyYW5zaXRpb24gPSBgaGVpZ2h0ICR7dGhpcy5kdXJhdGlvbn1tcyBlYXNlLW91dCwgd2lkdGggJHt0aGlzLmR1cmF0aW9ufW1zIGVhc2Utb3V0YDtcbiAgICAgICAgZHJvcEVsLnN0eWxlLmhlaWdodCA9IGAke2Ryb3BFbC5fcGRfZWxSZWN0LmhlaWdodH1weGA7XG4gICAgICAgIGRyb3BFbC5zdHlsZS53aWR0aCA9IGAke2Ryb3BFbC5fcGRfZWxSZWN0LndpZHRofXB4YDtcbiAgICAgICAgZHJvcEVsLl9wZF9hbmltYXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBkcm9wRWwuX3BkX2VsUmVjdCA9IHVuZGVmaW5lZDtcbiAgICB9LCBkcmFnRWwgPT4ge1xuICAgICAgaWYgKGRyYWdFbC5fcGRfYW5pbWF0aW9uKSB7XG4gICAgICAgIGRyYWdFbC5zdHlsZS50cmFuc2l0aW9uID0gYHRyYW5zZm9ybSAke3RoaXMuZHVyYXRpb259bXMgZWFzZS1vdXRgO1xuICAgICAgICBkcmFnRWwuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZSgwLCAwKSc7XG4gICAgICAgIGRyYWdFbC5fcGRfYW5pbWF0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hbmltYXRpb25UaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmVhY2hJbkNvbnRhaW5lcnMoY29udGFpbmVycywgZHJvcEVsID0+IHtcbiAgICAgICAgZHJvcEVsLnN0eWxlLnRyYW5zaXRpb24gPSAnJztcbiAgICAgICAgZHJvcEVsLnN0eWxlLmhlaWdodCA9ICcnO1xuICAgICAgICBkcm9wRWwuc3R5bGUud2lkdGggPSAnJztcbiAgICAgIH0sIGRyYWdFbCA9PiB7XG4gICAgICAgIGRyYWdFbC5zdHlsZS50cmFuc2l0aW9uID0gJyc7XG4gICAgICAgIGRyYWdFbC5zdHlsZS50cmFuc2Zvcm0gPSAnJztcbiAgICAgIH0pO1xuICAgIH0sIHRoaXMuZHVyYXRpb24pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvdGF0b0RyYWdnYWJsZTtcbiIsImNsYXNzIFBvaW50IHtcbiAgY29uc3RydWN0b3IoeCwgeSkge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgfVxuXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgUG9pbnQodGhpcy54LCB0aGlzLnkpO1xuICB9XG5cbiAgYWRkKHBvaW50KSB7XG4gICAgdGhpcy54ICs9IHBvaW50Lng7XG4gICAgdGhpcy55ICs9IHBvaW50Lnk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBkaWZmKHBvaW50KSB7XG4gICAgcmV0dXJuIG5ldyBQb2ludChwb2ludC54IC0gdGhpcy54LCBwb2ludC55IC0gdGhpcy55KTtcbiAgfVxuXG4gIGNoZWNrQXhpc09mZnNldChwb2ludCwgbGltaXQpIHtcbiAgICByZXR1cm4gKE1hdGguYWJzKHBvaW50LnggLSB0aGlzLngpID4gbGltaXQgfHwgTWF0aC5hYnMocG9pbnQueSAtIHRoaXMueSkgPiBsaW1pdCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9pbnQ7XG4iXSwic291cmNlUm9vdCI6IiJ9