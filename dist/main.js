!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i(1);var n,o=i(2);new((n=o)&&n.__esModule?n:{default:n}).default},function(t,e,i){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(3),r=(n=s)&&n.__esModule?n:{default:n};var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.draggableAttr="data-pd-draggable-item",this.containerAttr="data-pd-drop-container",this.duration=300,this.dragEl=null,this.dropEl=null,this.ghostEl=null,this.groupId="",this.dragging=!1,this.touchTimeout=null,this.startPoint=null,this.movePoint=null,this.onTouchTimeout=this.onTouchTimeout.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.eventOptions=this.getEventOptions(),this.body=document.body,this.scrollEl=document.scrollingElement||document.documentElement||document,this.bindPassiveEvents()}return o(t,[{key:"getEventOptions",value:function(){var t=!1;try{var e=function(){},i=Object.defineProperty({},"passive",{get:function(){return t=!0,!0}});window.addEventListener("check-passive",e,i),window.removeEventListener("check-passive",e,i)}catch(e){t=!1}return!!t&&{passive:!1}}},{key:"getPoint",value:function(t){var e=t.touch||!!t.touches&&t.touches[0];return e||(e=t),new r.default(e.clientX,e.clientY)}},{key:"getRect",value:function(t){var e=t.getBoundingClientRect();return{x:e.x||e.left,y:e.y||e.top,width:e.width,height:e.height}}},{key:"getMidpoint",value:function(t){var e=this.getRect(t);return new r.default(e.width/2+e.x,e.height/2+e.y)}},{key:"getRectDiff",value:function(t,e){var i=this.getRect(t);return{x:e.x-i.x,y:e.y-i.y,width:e.width-i.width,height:e.height-i.height}}},{key:"pointToEl",value:function(t){return document.elementFromPoint(t.x,t.y)}},{key:"each",value:function(t,e){for(var i=t.length,n=0;n<i;n++){var o=e(t[n],n);if(!0!==o&&!1===o)break}}},{key:"eachInContainers",value:function(t,e,i){var n=this;this.each(t,function(t){e(t),n.each(t.children,function(t){i(t)})})}},{key:"closest",value:function(t,e){for(;t;){if(e(t))return t;t=t.parentElement}return null}},{key:"closestByAttr",value:function(t,e,i){return this.closest(t,function(t){var n=t.getAttribute(e);return i?n===i:null!==n})}},{key:"closestContainer",value:function(t,e){return this.closestByAttr(t,this.containerAttr,e)}},{key:"closestDraggable",value:function(t,e){return this.closestByAttr(t,this.draggableAttr,e)}},{key:"bindPassiveEvents",value:function(){document.addEventListener("mousedown",this.onMouseDown,this.eventOptions),document.addEventListener("touchstart",this.onTouchStart,this.eventOptions)}},{key:"bindActiveEvents",value:function(){document.addEventListener("mousemove",this.onMouseMove,this.eventOptions),document.addEventListener("mouseup",this.onMouseUp,this.eventOptions),document.addEventListener("touchmove",this.onTouchMove,this.eventOptions),document.addEventListener("touchend",this.onTouchEnd,this.eventOptions)}},{key:"unbindActiveEvents",value:function(){document.removeEventListener("mousemove",this.onMouseMove,this.eventOptions),document.removeEventListener("mouseup",this.onMouseUp,this.eventOptions),document.removeEventListener("touchmove",this.onTouchMove,this.eventOptions),document.removeEventListener("touchend",this.onTouchEnd,this.eventOptions)}},{key:"onMouseDown",value:function(t){var e=this.getPoint(t),i=this.closestDraggable(this.pointToEl(e));i&&(this.dragEl=i,this.startPoint=e,this.bindActiveEvents(),this.dragStart(e))}},{key:"onMouseMove",value:function(t){var e=this.getPoint(t);t.preventDefault(),this.dragMove(e)}},{key:"onMouseUp",value:function(){this.dragEnd(),this.unbindActiveEvents()}},{key:"onTouchTimeout",value:function(){this.dragStart(this.startPoint)}},{key:"onTouchStart",value:function(t){var e=this.getPoint(t),i=this.closestDraggable(this.pointToEl(e));i&&(this.dragEl=i,this.startPoint=e,this.bindActiveEvents(),this.touchTimeout=setTimeout(this.onTouchTimeout,200))}},{key:"onTouchMove",value:function(t){var e=this.getPoint(t);if(!this.dragging)return this.startPoint.checkAxisOffset(e,4)&&(clearTimeout(this.touchTimeout),this.unbindActiveEvents()),void(this.movePoint=e);t.preventDefault(),this.dragMove(e)}},{key:"onTouchEnd",value:function(){clearTimeout(this.touchTimeout),this.dragEnd(),this.unbindActiveEvents()}},{key:"createGhost",value:function(){var t=this.getRect(this.dragEl);this.ghostEl=this.dragEl.cloneNode(!0),this.ghostEl.style.position="absolute",this.ghostEl.style.top=t.y-this.startPoint.y+"px",this.ghostEl.style.left=t.x-this.startPoint.x+"px",this.ghostEl.style.width=t.width+"px",this.ghostEl.style.height=t.height+"px",this.ghostEl.style.pointerEvents="none",this.ghostEl.style.transition="",this.ghostEl.style.transform="",this.updateGhostPosition(this.startPoint),this.body.appendChild(this.ghostEl),this.ghostEl.setAttribute("data-pd-ghost","")}},{key:"updateGhostPosition",value:function(t){var e=new r.default(this.scrollEl.scrollLeft,this.scrollEl.scrollTop).add(t);this.ghostEl.style.transform="translate("+e.x+"px, "+e.y+"px)"}},{key:"destroyGhost",value:function(){this.body.removeChild(this.ghostEl)}},{key:"dragStart",value:function(){this.groupId=this.dragEl.getAttribute(this.draggableAttr),null!==this.groupId&&(this.dragging=!0,this.dropEl=this.closestContainer(this.dragEl),this.movePoint&&(this.startPoint=this.movePoint),this.createGhost(),this.dropEl.style.transition="",this.dropEl.style.height="",this.dropEl.style.width="",this.dragEl.setAttribute("data-pd-drag",""))}},{key:"dragMove",value:function(t){var e=this;this.updateGhostPosition(t);var i=this.pointToEl(t),n=this.closestContainer(i,this.groupId);if(n&&!this.closest(n,function(t){return t===e.dragEl})){if(n!==this.dropEl){var o=this.dropEl;return this.dropEl=n,this.beforeSwap([n,o]),this.dropEl.appendChild(this.dragEl),void this.afterSwap([n,o])}var s=this.closestDraggable(i);if(s&&s!==this.dragEl&&s.parentElement===this.dropEl){var r=s.nextElementSibling,h=r||s.previousElementSibling;if(h){var a=this.getMidpoint(s),u=this.getMidpoint(h).diff(a),l=Math.abs(u.x)>Math.abs(u.y)?"x":"y";if(t[l]<a[l]){if(this.dragEl.nextElementSibling===s)return;return this.beforeSwap([n]),this.dropEl.insertBefore(this.dragEl,s),void this.afterSwap([n])}if(r){if(this.dragEl===r)return;return this.beforeSwap([n]),this.dropEl.insertBefore(this.dragEl,r),void this.afterSwap([n])}this.beforeSwap([n]),this.dropEl.appendChild(this.dragEl),this.afterSwap([n])}}}}},{key:"dragEnd",value:function(){this.dragging=!1,this.startPoint=null,this.movePoint=null,this.groupId="",this.destroyGhost(),this.dragEl.removeAttribute("data-pd-drag"),this.dragEl=null,this.dropEl=null}},{key:"beforeSwap",value:function(t){var e=this.getRect.bind(this);this.eachInContainers(t,function(t){t._pd_elRect=e(t)},function(t){t._pd_elRect=e(t)})}},{key:"afterSwap",value:function(t){var e=this,i=this.getRectDiff.bind(this),n=this.getRect.bind(this);clearTimeout(this.animationTimeout),this.eachInContainers(t,function(t){var e=n(t);t.style.transition="none",e.height!==t._pd_elRect.height&&(t.style.height=t._pd_elRect.height+"px",t._pd_animation=!0),e.width!==t._pd_elRect.width&&(t.style.width=t._pd_elRect.width+"px",t._pd_animation=!0),t._pd_elRect=e},function(t){if(!t._pd_elRect)return!0;var e=i(t,t._pd_elRect);t.style.transition="none",0===e.y&&0===e.x||(t.style.transform="translate("+e.x+"px, "+e.y+"px)",t._pd_animation=!0),t._pd_elRect=void 0}),this.dropEl.offsetWidth,this.eachInContainers(t,function(t){t._pd_animation&&(t.style.transition="height "+e.duration+"ms ease-out, width "+e.duration+"ms ease-out",t.style.height=t._pd_elRect.height+"px",t.style.width=t._pd_elRect.width+"px",t._pd_animation=void 0),t._pd_elRect=void 0},function(t){t._pd_animation&&(t.style.transition="transform "+e.duration+"ms ease-out",t.style.transform="translate(0, 0)",t._pd_animation=void 0)}),this.animationTimeout=setTimeout(function(){e.eachInContainers(t,function(t){t.style.transition="",t.style.height="",t.style.width=""},function(t){t.style.transition="",t.style.transform=""})},this.duration)}}]),t}();e.default=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i}return n(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"diff",value:function(e){return new t(e.x-this.x,e.y-this.y)}},{key:"checkAxisOffset",value:function(t,e){return Math.abs(t.x-this.x)>e||Math.abs(t.y-this.y)>e}}]),t}();e.default=o}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RyYWdnYWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcG9pbnQuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfZHJhZ2dhYmxlIiwiRHJhZ2dhYmxlIiwiX3BvaW50IiwiUG90YXRvRHJhZ2dhYmxlIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImRyYWdnYWJsZUF0dHIiLCJjb250YWluZXJBdHRyIiwiZHVyYXRpb24iLCJkcmFnRWwiLCJkcm9wRWwiLCJnaG9zdEVsIiwiZ3JvdXBJZCIsImRyYWdnaW5nIiwidG91Y2hUaW1lb3V0Iiwic3RhcnRQb2ludCIsIm1vdmVQb2ludCIsIm9uVG91Y2hUaW1lb3V0Iiwib25Ub3VjaFN0YXJ0Iiwib25Ub3VjaE1vdmUiLCJvblRvdWNoRW5kIiwib25Nb3VzZURvd24iLCJvbk1vdXNlTW92ZSIsIm9uTW91c2VVcCIsImV2ZW50T3B0aW9ucyIsImdldEV2ZW50T3B0aW9ucyIsImJvZHkiLCJkb2N1bWVudCIsInNjcm9sbEVsIiwic2Nyb2xsaW5nRWxlbWVudCIsImRvY3VtZW50RWxlbWVudCIsImJpbmRQYXNzaXZlRXZlbnRzIiwicGFzc2l2ZVN1cHBvcnQiLCJjYiIsIm9wdCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZSIsInBhc3NpdmUiLCJwb2ludCIsInRvdWNoIiwidG91Y2hlcyIsIlBvaW50IiwiY2xpZW50WCIsImNsaWVudFkiLCJlbCIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ4IiwibGVmdCIsInkiLCJ0b3AiLCJ3aWR0aCIsImhlaWdodCIsImVsUmVjdCIsImdldFJlY3QiLCJlbGVtZW50RnJvbVBvaW50IiwiYXJyYXkiLCJmbiIsImxlbmd0aCIsInJlc3VsdCIsImNvbnRhaW5lcnMiLCJkcm9wRWxGbiIsImRyYWdFbEZuIiwiX3RoaXMiLCJlYWNoIiwiY29udGFpbmVyIiwiY2hpbGRyZW4iLCJtYXRjaCIsInBhcmVudEVsZW1lbnQiLCJhdHRyTmFtZSIsImF0dHJWYWx1ZSIsImNsb3Nlc3QiLCJhdHRyIiwiZ2V0QXR0cmlidXRlIiwiY2xvc2VzdEJ5QXR0ciIsImdldFBvaW50IiwiY2xvc2VzdERyYWdnYWJsZSIsInBvaW50VG9FbCIsImJpbmRBY3RpdmVFdmVudHMiLCJkcmFnU3RhcnQiLCJwcmV2ZW50RGVmYXVsdCIsImRyYWdNb3ZlIiwiZHJhZ0VuZCIsInVuYmluZEFjdGl2ZUV2ZW50cyIsInNldFRpbWVvdXQiLCJjaGVja0F4aXNPZmZzZXQiLCJjbGVhclRpbWVvdXQiLCJkcmFnRWxSZWN0IiwiY2xvbmVOb2RlIiwic3R5bGUiLCJwb3NpdGlvbiIsInBvaW50ZXJFdmVudHMiLCJ0cmFuc2l0aW9uIiwidHJhbnNmb3JtIiwidXBkYXRlR2hvc3RQb3NpdGlvbiIsImFwcGVuZENoaWxkIiwic2V0QXR0cmlidXRlIiwibmV3UG9pbnQiLCJzY3JvbGxMZWZ0Iiwic2Nyb2xsVG9wIiwiYWRkIiwicmVtb3ZlQ2hpbGQiLCJjbG9zZXN0Q29udGFpbmVyIiwiY3JlYXRlR2hvc3QiLCJfdGhpczIiLCJvdmVyRWwiLCJwcmV2RHJvcEVsIiwiYmVmb3JlU3dhcCIsImFmdGVyU3dhcCIsIm5leHRFbCIsIm5leHRFbGVtZW50U2libGluZyIsInNpYmxpbmdFbCIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJkcmFnTWlkcG9pbnQiLCJnZXRNaWRwb2ludCIsImRpZmYiLCJheGlzIiwiTWF0aCIsImFicyIsImluc2VydEJlZm9yZSIsImRlc3Ryb3lHaG9zdCIsInJlbW92ZUF0dHJpYnV0ZSIsImVhY2hJbkNvbnRhaW5lcnMiLCJfcGRfZWxSZWN0IiwiX3RoaXMzIiwiZ2V0UmVjdERpZmYiLCJhbmltYXRpb25UaW1lb3V0IiwiX3BkX2FuaW1hdGlvbiIsImVsUmVjdERpZmYiLCJ1bmRlZmluZWQiLCJvZmZzZXRXaWR0aCIsImxpbWl0Il0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsWUFBQSxDQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQXJCLEVBQUFxQixJ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dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0ICcuL3Njc3MvbWFpbi5zY3NzJztcbmltcG9ydCBEcmFnZ2FibGUgZnJvbSAnLi9kcmFnZ2FibGUnO1xuXG5uZXcgRHJhZ2dhYmxlKCk7XG4iLCJpbXBvcnQgUG9pbnQgZnJvbSAnLi9wb2ludCc7XG5cbmNsYXNzIFBvdGF0b0RyYWdnYWJsZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZHJhZ2dhYmxlQXR0ciA9ICdkYXRhLXBkLWRyYWdnYWJsZS1pdGVtJztcbiAgICB0aGlzLmNvbnRhaW5lckF0dHIgPSAnZGF0YS1wZC1kcm9wLWNvbnRhaW5lcic7XG4gICAgdGhpcy5kdXJhdGlvbiA9IDMwMDtcblxuICAgIHRoaXMuZHJhZ0VsID0gbnVsbDtcbiAgICB0aGlzLmRyb3BFbCA9IG51bGw7XG4gICAgdGhpcy5naG9zdEVsID0gbnVsbDtcblxuICAgIHRoaXMuZ3JvdXBJZCA9ICcnO1xuXG4gICAgdGhpcy5kcmFnZ2luZyA9IGZhbHNlO1xuICAgIHRoaXMudG91Y2hUaW1lb3V0ID0gbnVsbDtcbiAgICB0aGlzLnN0YXJ0UG9pbnQgPSBudWxsO1xuICAgIHRoaXMubW92ZVBvaW50ID0gbnVsbDtcblxuICAgIHRoaXMub25Ub3VjaFRpbWVvdXQgPSB0aGlzLm9uVG91Y2hUaW1lb3V0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5vblRvdWNoU3RhcnQgPSB0aGlzLm9uVG91Y2hTdGFydC5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25Ub3VjaE1vdmUgPSB0aGlzLm9uVG91Y2hNb3ZlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vblRvdWNoRW5kID0gdGhpcy5vblRvdWNoRW5kLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLm9uTW91c2VEb3duID0gdGhpcy5vbk1vdXNlRG93bi5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25Nb3VzZU1vdmUgPSB0aGlzLm9uTW91c2VNb3ZlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbk1vdXNlVXAgPSB0aGlzLm9uTW91c2VVcC5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5ldmVudE9wdGlvbnMgPSB0aGlzLmdldEV2ZW50T3B0aW9ucygpO1xuICAgIHRoaXMuYm9keSA9IGRvY3VtZW50LmJvZHk7XG4gICAgdGhpcy5zY3JvbGxFbCA9IGRvY3VtZW50LnNjcm9sbGluZ0VsZW1lbnQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8IGRvY3VtZW50O1xuXG4gICAgdGhpcy5iaW5kUGFzc2l2ZUV2ZW50cygpO1xuICB9XG5cbiAgZ2V0RXZlbnRPcHRpb25zKCkge1xuICAgIGxldCBwYXNzaXZlU3VwcG9ydCA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjYiA9ICgpID0+IHt9O1xuICAgICAgY29uc3Qgb3B0ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAncGFzc2l2ZScsIHtcbiAgICAgICAgZ2V0KCkgeyBwYXNzaXZlU3VwcG9ydCA9IHRydWU7IHJldHVybiB0cnVlOyB9XG4gICAgICB9KTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjaGVjay1wYXNzaXZlJywgY2IsIG9wdCk7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hlY2stcGFzc2l2ZScsIGNiLCBvcHQpO1xuICAgIH0gY2F0Y2ggKGUpIHsgcGFzc2l2ZVN1cHBvcnQgPSBmYWxzZTsgfVxuICAgIHJldHVybiBwYXNzaXZlU3VwcG9ydCA/IHsgcGFzc2l2ZTogZmFsc2UgfSA6IGZhbHNlO1xuICB9XG5cbiAgZ2V0UG9pbnQoZSkge1xuICAgIGxldCBwb2ludCA9IGUudG91Y2ggfHwgKGUudG91Y2hlcyA/IGUudG91Y2hlc1sgMCBdIDogZmFsc2UpO1xuICAgIGlmICghcG9pbnQpIHBvaW50ID0gZTtcbiAgICByZXR1cm4gbmV3IFBvaW50KHBvaW50LmNsaWVudFgsIHBvaW50LmNsaWVudFkpO1xuICB9XG5cbiAgZ2V0UmVjdChlbCkge1xuICAgIGNvbnN0IHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICByZXR1cm4ge1xuICAgICAgeDogcmVjdC54IHx8IHJlY3QubGVmdCxcbiAgICAgIHk6IHJlY3QueSB8fCByZWN0LnRvcCxcbiAgICAgIHdpZHRoOiByZWN0LndpZHRoLFxuICAgICAgaGVpZ2h0OiByZWN0LmhlaWdodCxcbiAgICB9O1xuICB9XG5cbiAgZ2V0TWlkcG9pbnQoZWwpIHtcbiAgICBjb25zdCBlbFJlY3QgPSB0aGlzLmdldFJlY3QoZWwpO1xuICAgIHJldHVybiBuZXcgUG9pbnQoZWxSZWN0LndpZHRoIC8gMiArIGVsUmVjdC54LCBlbFJlY3QuaGVpZ2h0IC8gMiArIGVsUmVjdC55KTtcbiAgfVxuXG4gIGdldFJlY3REaWZmKGVsLCBlbFJlY3QpIHtcbiAgICBjb25zdCByZWN0ID0gdGhpcy5nZXRSZWN0KGVsKTtcbiAgICByZXR1cm4ge1xuICAgICAgeDogZWxSZWN0LnggLSByZWN0LngsXG4gICAgICB5OiBlbFJlY3QueSAtIHJlY3QueSxcbiAgICAgIHdpZHRoOiBlbFJlY3Qud2lkdGggLSByZWN0LndpZHRoLFxuICAgICAgaGVpZ2h0OiBlbFJlY3QuaGVpZ2h0IC0gcmVjdC5oZWlnaHQsXG4gICAgfTtcbiAgfVxuXG4gIHBvaW50VG9FbChwb2ludCkge1xuICAgIHJldHVybiBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KHBvaW50LngsIHBvaW50LnkpO1xuICB9XG5cbiAgZWFjaChhcnJheSwgZm4pIHtcbiAgICBjb25zdCBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgcmVzdWx0ID0gZm4oYXJyYXlbaV0sIGkpO1xuICAgICAgaWYgKHJlc3VsdCA9PT0gdHJ1ZSkgY29udGludWU7XG4gICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgZWFjaEluQ29udGFpbmVycyhjb250YWluZXJzLCBkcm9wRWxGbiwgZHJhZ0VsRm4pIHtcbiAgICB0aGlzLmVhY2goY29udGFpbmVycywgY29udGFpbmVyID0+IHtcbiAgICAgIGRyb3BFbEZuKGNvbnRhaW5lcik7XG4gICAgICB0aGlzLmVhY2goY29udGFpbmVyLmNoaWxkcmVuLCBlbCA9PiB7XG4gICAgICAgIGRyYWdFbEZuKGVsKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2VzdChlbCwgbWF0Y2gpIHtcbiAgICBmb3IgKDtlbDspIHtcbiAgICAgIGlmIChtYXRjaChlbCkpIHJldHVybiBlbDtcbiAgICAgIGVsID0gZWwucGFyZW50RWxlbWVudDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjbG9zZXN0QnlBdHRyKGVsLCBhdHRyTmFtZSwgYXR0clZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xvc2VzdChlbCwgKGVsKSA9PiB7XG4gICAgICBjb25zdCBhdHRyID0gZWwuZ2V0QXR0cmlidXRlKGF0dHJOYW1lKTtcbiAgICAgIHJldHVybiBhdHRyVmFsdWUgPyBhdHRyID09PSBhdHRyVmFsdWUgOiBhdHRyICE9PSBudWxsO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2VzdENvbnRhaW5lcihlbCwgZ3JvdXBJZCkge1xuICAgIHJldHVybiB0aGlzLmNsb3Nlc3RCeUF0dHIoZWwsIHRoaXMuY29udGFpbmVyQXR0ciwgZ3JvdXBJZCk7XG4gIH1cblxuICBjbG9zZXN0RHJhZ2dhYmxlKGVsLCBncm91cElkKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xvc2VzdEJ5QXR0cihlbCwgdGhpcy5kcmFnZ2FibGVBdHRyLCBncm91cElkKTtcbiAgfVxuXG4gIGJpbmRQYXNzaXZlRXZlbnRzKCkge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24sIHRoaXMuZXZlbnRPcHRpb25zKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5vblRvdWNoU3RhcnQsIHRoaXMuZXZlbnRPcHRpb25zKTtcbiAgfVxuXG4gIGJpbmRBY3RpdmVFdmVudHMoKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSwgdGhpcy5ldmVudE9wdGlvbnMpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCwgdGhpcy5ldmVudE9wdGlvbnMpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMub25Ub3VjaE1vdmUsIHRoaXMuZXZlbnRPcHRpb25zKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMub25Ub3VjaEVuZCwgdGhpcy5ldmVudE9wdGlvbnMpO1xuICB9XG5cbiAgdW5iaW5kQWN0aXZlRXZlbnRzKCkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUsIHRoaXMuZXZlbnRPcHRpb25zKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbk1vdXNlVXAsIHRoaXMuZXZlbnRPcHRpb25zKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLm9uVG91Y2hNb3ZlLCB0aGlzLmV2ZW50T3B0aW9ucyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLm9uVG91Y2hFbmQsIHRoaXMuZXZlbnRPcHRpb25zKTtcbiAgfVxuXG4gIG9uTW91c2VEb3duKGUpIHtcbiAgICBjb25zdCBwb2ludCA9IHRoaXMuZ2V0UG9pbnQoZSk7XG5cbiAgICBjb25zdCBkcmFnRWwgPSB0aGlzLmNsb3Nlc3REcmFnZ2FibGUodGhpcy5wb2ludFRvRWwocG9pbnQpKTtcbiAgICBpZiAoIWRyYWdFbCkgcmV0dXJuO1xuXG4gICAgdGhpcy5kcmFnRWwgPSBkcmFnRWw7XG4gICAgdGhpcy5zdGFydFBvaW50ID0gcG9pbnQ7XG5cbiAgICB0aGlzLmJpbmRBY3RpdmVFdmVudHMoKTtcbiAgICB0aGlzLmRyYWdTdGFydChwb2ludCk7XG4gIH1cblxuICBvbk1vdXNlTW92ZShlKSB7XG4gICAgY29uc3QgcG9pbnQgPSB0aGlzLmdldFBvaW50KGUpO1xuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuZHJhZ01vdmUocG9pbnQpO1xuICB9XG5cbiAgb25Nb3VzZVVwKCkge1xuICAgIHRoaXMuZHJhZ0VuZCgpO1xuICAgIHRoaXMudW5iaW5kQWN0aXZlRXZlbnRzKCk7XG4gIH1cblxuICBvblRvdWNoVGltZW91dCgpIHtcbiAgICB0aGlzLmRyYWdTdGFydCh0aGlzLnN0YXJ0UG9pbnQpO1xuICB9XG5cbiAgb25Ub3VjaFN0YXJ0KGUpIHtcbiAgICBjb25zdCBwb2ludCA9IHRoaXMuZ2V0UG9pbnQoZSk7XG5cbiAgICBjb25zdCBkcmFnRWwgPSB0aGlzLmNsb3Nlc3REcmFnZ2FibGUodGhpcy5wb2ludFRvRWwocG9pbnQpKTtcbiAgICBpZiAoIWRyYWdFbCkgcmV0dXJuO1xuXG4gICAgdGhpcy5kcmFnRWwgPSBkcmFnRWw7XG4gICAgdGhpcy5zdGFydFBvaW50ID0gcG9pbnQ7XG5cbiAgICB0aGlzLmJpbmRBY3RpdmVFdmVudHMoKTtcbiAgICB0aGlzLnRvdWNoVGltZW91dCA9IHNldFRpbWVvdXQodGhpcy5vblRvdWNoVGltZW91dCwgMjAwKTtcbiAgfVxuXG4gIG9uVG91Y2hNb3ZlKGUpIHtcbiAgICBjb25zdCBwb2ludCA9IHRoaXMuZ2V0UG9pbnQoZSk7XG5cbiAgICBpZiAoIXRoaXMuZHJhZ2dpbmcpIHtcbiAgICAgIGlmICh0aGlzLnN0YXJ0UG9pbnQuY2hlY2tBeGlzT2Zmc2V0KHBvaW50LCA0KSkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50b3VjaFRpbWVvdXQpO1xuICAgICAgICB0aGlzLnVuYmluZEFjdGl2ZUV2ZW50cygpO1xuICAgICAgfVxuICAgICAgdGhpcy5tb3ZlUG9pbnQgPSBwb2ludDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5kcmFnTW92ZShwb2ludCk7XG4gIH1cblxuICBvblRvdWNoRW5kKCkge1xuICAgIGNsZWFyVGltZW91dCh0aGlzLnRvdWNoVGltZW91dCk7XG4gICAgdGhpcy5kcmFnRW5kKCk7XG4gICAgdGhpcy51bmJpbmRBY3RpdmVFdmVudHMoKTtcbiAgfVxuXG4gIGNyZWF0ZUdob3N0KCkge1xuICAgIGNvbnN0IGRyYWdFbFJlY3QgPSB0aGlzLmdldFJlY3QodGhpcy5kcmFnRWwpO1xuICAgIHRoaXMuZ2hvc3RFbCA9IHRoaXMuZHJhZ0VsLmNsb25lTm9kZSh0cnVlKTtcbiAgICB0aGlzLmdob3N0RWwuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIHRoaXMuZ2hvc3RFbC5zdHlsZS50b3AgPSBgJHsoZHJhZ0VsUmVjdC55IC0gdGhpcy5zdGFydFBvaW50LnkpfXB4YDtcbiAgICB0aGlzLmdob3N0RWwuc3R5bGUubGVmdCA9IGAkeyhkcmFnRWxSZWN0LnggLSB0aGlzLnN0YXJ0UG9pbnQueCl9cHhgO1xuICAgIHRoaXMuZ2hvc3RFbC5zdHlsZS53aWR0aCA9IGAke2RyYWdFbFJlY3Qud2lkdGh9cHhgO1xuICAgIHRoaXMuZ2hvc3RFbC5zdHlsZS5oZWlnaHQgPSBgJHtkcmFnRWxSZWN0LmhlaWdodH1weGA7XG4gICAgdGhpcy5naG9zdEVsLnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnbm9uZSc7XG5cbiAgICAvLyByZXNldCBhZnRlciBhbmltYXRpb25cbiAgICB0aGlzLmdob3N0RWwuc3R5bGUudHJhbnNpdGlvbiA9ICcnO1xuICAgIHRoaXMuZ2hvc3RFbC5zdHlsZS50cmFuc2Zvcm0gPSAnJztcblxuICAgIHRoaXMudXBkYXRlR2hvc3RQb3NpdGlvbih0aGlzLnN0YXJ0UG9pbnQpO1xuXG4gICAgdGhpcy5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZ2hvc3RFbCk7XG5cbiAgICB0aGlzLmdob3N0RWwuc2V0QXR0cmlidXRlKCdkYXRhLXBkLWdob3N0JywgJycpO1xuICB9XG5cbiAgdXBkYXRlR2hvc3RQb3NpdGlvbihwb2ludCkge1xuICAgIGNvbnN0IG5ld1BvaW50ID0gbmV3IFBvaW50KHRoaXMuc2Nyb2xsRWwuc2Nyb2xsTGVmdCwgdGhpcy5zY3JvbGxFbC5zY3JvbGxUb3ApLmFkZChwb2ludCk7XG4gICAgdGhpcy5naG9zdEVsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtuZXdQb2ludC54fXB4LCAke25ld1BvaW50Lnl9cHgpYDtcbiAgfVxuXG4gIGRlc3Ryb3lHaG9zdCgpIHtcbiAgICB0aGlzLmJvZHkucmVtb3ZlQ2hpbGQodGhpcy5naG9zdEVsKTtcbiAgfVxuXG4gIGRyYWdTdGFydCgpIHsgICAgXG4gICAgdGhpcy5ncm91cElkID0gdGhpcy5kcmFnRWwuZ2V0QXR0cmlidXRlKHRoaXMuZHJhZ2dhYmxlQXR0cik7XG4gICAgaWYgKHRoaXMuZ3JvdXBJZCA9PT0gbnVsbCkgcmV0dXJuOyAvLyBwcm9iYWJseSBub3QgbmVjZXNzYXJ5XG5cbiAgICB0aGlzLmRyYWdnaW5nID0gdHJ1ZTtcblxuICAgIHRoaXMuZHJvcEVsID0gdGhpcy5jbG9zZXN0Q29udGFpbmVyKHRoaXMuZHJhZ0VsKTtcbiAgICBpZiAodGhpcy5tb3ZlUG9pbnQpIHRoaXMuc3RhcnRQb2ludCA9IHRoaXMubW92ZVBvaW50O1xuXG4gICAgdGhpcy5jcmVhdGVHaG9zdCgpO1xuXG4gICAgLy8gcmVzZXQgYWZ0ZXIgYW5pbWF0aW9uXG4gICAgdGhpcy5kcm9wRWwuc3R5bGUudHJhbnNpdGlvbiA9ICcnO1xuICAgIHRoaXMuZHJvcEVsLnN0eWxlLmhlaWdodCA9ICcnO1xuICAgIHRoaXMuZHJvcEVsLnN0eWxlLndpZHRoID0gJyc7XG5cbiAgICB0aGlzLmRyYWdFbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGQtZHJhZycsICcnKTtcbiAgfVxuXG4gIGRyYWdNb3ZlKHBvaW50KSB7XG4gICAgdGhpcy51cGRhdGVHaG9zdFBvc2l0aW9uKHBvaW50KTtcblxuICAgIGNvbnN0IG92ZXJFbCA9IHRoaXMucG9pbnRUb0VsKHBvaW50KTtcblxuICAgIGNvbnN0IGRyb3BFbCA9IHRoaXMuY2xvc2VzdENvbnRhaW5lcihvdmVyRWwsIHRoaXMuZ3JvdXBJZCk7XG4gICAgaWYgKCFkcm9wRWwpIHJldHVybjtcblxuICAgIC8vIGRyb3BFbCBpbnNpZGUgZHJhZ0VsXG4gICAgaWYgKHRoaXMuY2xvc2VzdChkcm9wRWwsIGVsID0+IGVsID09PSB0aGlzLmRyYWdFbCkpIHJldHVybjtcblxuICAgIC8vIG90aGVyIGRyb3BFbFxuICAgIGlmIChkcm9wRWwgIT09IHRoaXMuZHJvcEVsKSB7XG4gICAgICBjb25zdCBwcmV2RHJvcEVsID0gdGhpcy5kcm9wRWw7XG4gICAgICB0aGlzLmRyb3BFbCA9IGRyb3BFbDtcblxuICAgICAgdGhpcy5iZWZvcmVTd2FwKFtkcm9wRWwsIHByZXZEcm9wRWxdKTtcbiAgICAgIHRoaXMuZHJvcEVsLmFwcGVuZENoaWxkKHRoaXMuZHJhZ0VsKTtcbiAgICAgIHRoaXMuYWZ0ZXJTd2FwKFtkcm9wRWwsIHByZXZEcm9wRWxdKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBkcmFnRWwgPSB0aGlzLmNsb3Nlc3REcmFnZ2FibGUob3ZlckVsKTtcbiAgICBpZiAoIWRyYWdFbCkgcmV0dXJuO1xuXG4gICAgLy8gdGhlIHNhbWUgZHJhZ0VsXG4gICAgaWYgKGRyYWdFbCA9PT0gdGhpcy5kcmFnRWwpIHJldHVybjtcblxuICAgIC8vIG90aGVyIGRyb3BFbCwgaXQgc2hvdWxkIGJlIHRoZSBzYW1lXG4gICAgaWYgKGRyYWdFbC5wYXJlbnRFbGVtZW50ICE9PSB0aGlzLmRyb3BFbCApIHJldHVybjtcblxuICAgIGNvbnN0IG5leHRFbCA9IGRyYWdFbC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgY29uc3Qgc2libGluZ0VsID0gbmV4dEVsIHx8IGRyYWdFbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgIGlmICghc2libGluZ0VsKSByZXR1cm47XG5cbiAgICBjb25zdCBkcmFnTWlkcG9pbnQgPSB0aGlzLmdldE1pZHBvaW50KGRyYWdFbCk7XG4gICAgY29uc3QgZGlmZiA9IHRoaXMuZ2V0TWlkcG9pbnQoc2libGluZ0VsKS5kaWZmKGRyYWdNaWRwb2ludCk7XG4gICAgY29uc3QgYXhpcyA9IE1hdGguYWJzKGRpZmYueCkgPiBNYXRoLmFicyhkaWZmLnkpID8gJ3gnIDogJ3knO1xuXG4gICAgaWYgKHBvaW50W2F4aXNdIDwgZHJhZ01pZHBvaW50W2F4aXNdKSB7XG4gICAgICAvLyBwcmV2ZW50IHVubmVjZXNzYXJ5IGluc2VydFxuICAgICAgaWYgKHRoaXMuZHJhZ0VsLm5leHRFbGVtZW50U2libGluZyA9PT0gZHJhZ0VsKSByZXR1cm47XG5cbiAgICAgIHRoaXMuYmVmb3JlU3dhcChbZHJvcEVsXSk7XG4gICAgICB0aGlzLmRyb3BFbC5pbnNlcnRCZWZvcmUodGhpcy5kcmFnRWwsIGRyYWdFbCk7XG4gICAgICB0aGlzLmFmdGVyU3dhcChbZHJvcEVsXSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5leHRFbCkge1xuICAgICAgLy8gcHJldmVudCB1bm5lY2Vzc2FyeSBpbnNlcnRcbiAgICAgIGlmICh0aGlzLmRyYWdFbCA9PT0gbmV4dEVsKSByZXR1cm47XG5cbiAgICAgIHRoaXMuYmVmb3JlU3dhcChbZHJvcEVsXSk7XG4gICAgICB0aGlzLmRyb3BFbC5pbnNlcnRCZWZvcmUodGhpcy5kcmFnRWwsIG5leHRFbCk7XG4gICAgICB0aGlzLmFmdGVyU3dhcChbZHJvcEVsXSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gdGhlIGxhc3QgaW4gY29udGFpbmVyXG4gICAgdGhpcy5iZWZvcmVTd2FwKFtkcm9wRWxdKTtcbiAgICB0aGlzLmRyb3BFbC5hcHBlbmRDaGlsZCh0aGlzLmRyYWdFbCk7XG4gICAgdGhpcy5hZnRlclN3YXAoW2Ryb3BFbF0pO1xuICB9XG5cbiAgZHJhZ0VuZCgpIHtcbiAgICB0aGlzLmRyYWdnaW5nID0gZmFsc2U7XG4gICAgdGhpcy5zdGFydFBvaW50ID0gbnVsbDtcbiAgICB0aGlzLm1vdmVQb2ludCA9IG51bGw7XG5cbiAgICB0aGlzLmdyb3VwSWQgPSAnJztcblxuICAgIHRoaXMuZGVzdHJveUdob3N0KCk7XG5cbiAgICB0aGlzLmRyYWdFbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtcGQtZHJhZycpO1xuICAgIHRoaXMuZHJhZ0VsID0gbnVsbDtcbiAgICB0aGlzLmRyb3BFbCA9IG51bGw7XG4gIH1cblxuICBiZWZvcmVTd2FwKGNvbnRhaW5lcnMpIHtcbiAgICBjb25zdCBnZXRSZWN0ID0gdGhpcy5nZXRSZWN0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5lYWNoSW5Db250YWluZXJzKGNvbnRhaW5lcnMsIGRyb3BFbCA9PiB7XG4gICAgICBkcm9wRWwuX3BkX2VsUmVjdCA9IGdldFJlY3QoZHJvcEVsKTtcbiAgICB9LCBkcmFnRWwgPT4ge1xuICAgICAgZHJhZ0VsLl9wZF9lbFJlY3QgPSBnZXRSZWN0KGRyYWdFbCk7XG4gICAgfSk7XG4gIH1cblxuICBhZnRlclN3YXAoY29udGFpbmVycykge1xuICAgIGNvbnN0IGdldFJlY3REaWZmID0gdGhpcy5nZXRSZWN0RGlmZi5iaW5kKHRoaXMpLCBnZXRSZWN0ID0gdGhpcy5nZXRSZWN0LmJpbmQodGhpcyk7XG5cbiAgICBjbGVhclRpbWVvdXQodGhpcy5hbmltYXRpb25UaW1lb3V0KTtcblxuICAgIHRoaXMuZWFjaEluQ29udGFpbmVycyhjb250YWluZXJzLCBkcm9wRWwgPT4ge1xuICAgICAgY29uc3QgZWxSZWN0ID0gZ2V0UmVjdChkcm9wRWwpO1xuICAgICAgZHJvcEVsLnN0eWxlLnRyYW5zaXRpb24gPSAnbm9uZSc7XG4gICAgICBpZiAoZWxSZWN0LmhlaWdodCAhPT0gZHJvcEVsLl9wZF9lbFJlY3QuaGVpZ2h0KSB7XG4gICAgICAgIGRyb3BFbC5zdHlsZS5oZWlnaHQgPSBgJHtkcm9wRWwuX3BkX2VsUmVjdC5oZWlnaHR9cHhgO1xuICAgICAgICBkcm9wRWwuX3BkX2FuaW1hdGlvbiA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoZWxSZWN0LndpZHRoICE9PSBkcm9wRWwuX3BkX2VsUmVjdC53aWR0aCkge1xuICAgICAgICBkcm9wRWwuc3R5bGUud2lkdGggPSBgJHtkcm9wRWwuX3BkX2VsUmVjdC53aWR0aH1weGA7XG4gICAgICAgIGRyb3BFbC5fcGRfYW5pbWF0aW9uID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGRyb3BFbC5fcGRfZWxSZWN0ID0gZWxSZWN0O1xuICAgIH0sIGRyYWdFbCA9PiB7XG4gICAgICBpZiAoIWRyYWdFbC5fcGRfZWxSZWN0KSByZXR1cm4gdHJ1ZTtcbiAgICAgIGNvbnN0IGVsUmVjdERpZmYgPSBnZXRSZWN0RGlmZihkcmFnRWwsIGRyYWdFbC5fcGRfZWxSZWN0KTtcbiAgICAgIGRyYWdFbC5zdHlsZS50cmFuc2l0aW9uID0gJ25vbmUnO1xuICAgICAgaWYgKGVsUmVjdERpZmYueSAhPT0gMCB8fCBlbFJlY3REaWZmLnggIT09IDApIHtcbiAgICAgICAgZHJhZ0VsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtlbFJlY3REaWZmLnh9cHgsICR7ZWxSZWN0RGlmZi55fXB4KWA7XG4gICAgICAgIGRyYWdFbC5fcGRfYW5pbWF0aW9uID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGRyYWdFbC5fcGRfZWxSZWN0ID0gdW5kZWZpbmVkO1xuICAgIH0pO1xuXG4gICAgdGhpcy5kcm9wRWwub2Zmc2V0V2lkdGg7IC8vIGZvcmNlIHJlZmxvd1xuXG4gICAgdGhpcy5lYWNoSW5Db250YWluZXJzKGNvbnRhaW5lcnMsIGRyb3BFbCA9PiB7XG5cbiAgICAgIGlmIChkcm9wRWwuX3BkX2FuaW1hdGlvbikge1xuICAgICAgICBkcm9wRWwuc3R5bGUudHJhbnNpdGlvbiA9IGBoZWlnaHQgJHt0aGlzLmR1cmF0aW9ufW1zIGVhc2Utb3V0LCB3aWR0aCAke3RoaXMuZHVyYXRpb259bXMgZWFzZS1vdXRgO1xuICAgICAgICBkcm9wRWwuc3R5bGUuaGVpZ2h0ID0gYCR7ZHJvcEVsLl9wZF9lbFJlY3QuaGVpZ2h0fXB4YDtcbiAgICAgICAgZHJvcEVsLnN0eWxlLndpZHRoID0gYCR7ZHJvcEVsLl9wZF9lbFJlY3Qud2lkdGh9cHhgO1xuICAgICAgICBkcm9wRWwuX3BkX2FuaW1hdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIGRyb3BFbC5fcGRfZWxSZWN0ID0gdW5kZWZpbmVkO1xuICAgIH0sIGRyYWdFbCA9PiB7XG4gICAgICBpZiAoZHJhZ0VsLl9wZF9hbmltYXRpb24pIHtcbiAgICAgICAgZHJhZ0VsLnN0eWxlLnRyYW5zaXRpb24gPSBgdHJhbnNmb3JtICR7dGhpcy5kdXJhdGlvbn1tcyBlYXNlLW91dGA7XG4gICAgICAgIGRyYWdFbC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKDAsIDApJztcbiAgICAgICAgZHJhZ0VsLl9wZF9hbmltYXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmFuaW1hdGlvblRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZWFjaEluQ29udGFpbmVycyhjb250YWluZXJzLCBkcm9wRWwgPT4ge1xuICAgICAgICBkcm9wRWwuc3R5bGUudHJhbnNpdGlvbiA9ICcnO1xuICAgICAgICBkcm9wRWwuc3R5bGUuaGVpZ2h0ID0gJyc7XG4gICAgICAgIGRyb3BFbC5zdHlsZS53aWR0aCA9ICcnO1xuICAgICAgfSwgZHJhZ0VsID0+IHtcbiAgICAgICAgZHJhZ0VsLnN0eWxlLnRyYW5zaXRpb24gPSAnJztcbiAgICAgICAgZHJhZ0VsLnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuICAgICAgfSk7XG4gICAgfSwgdGhpcy5kdXJhdGlvbik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG90YXRvRHJhZ2dhYmxlO1xuIiwiY2xhc3MgUG9pbnQge1xuICBjb25zdHJ1Y3Rvcih4LCB5KSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICB9XG5cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBQb2ludCh0aGlzLngsIHRoaXMueSk7XG4gIH1cblxuICBhZGQocG9pbnQpIHtcbiAgICB0aGlzLnggKz0gcG9pbnQueDtcbiAgICB0aGlzLnkgKz0gcG9pbnQueTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGRpZmYocG9pbnQpIHtcbiAgICByZXR1cm4gbmV3IFBvaW50KHBvaW50LnggLSB0aGlzLngsIHBvaW50LnkgLSB0aGlzLnkpO1xuICB9XG5cbiAgY2hlY2tBeGlzT2Zmc2V0KHBvaW50LCBsaW1pdCkge1xuICAgIHJldHVybiAoTWF0aC5hYnMocG9pbnQueCAtIHRoaXMueCkgPiBsaW1pdCB8fCBNYXRoLmFicyhwb2ludC55IC0gdGhpcy55KSA+IGxpbWl0KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb2ludDtcbiJdLCJzb3VyY2VSb290IjoiIn0=