!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i(1);var n,o=i(2);new((n=o)&&n.__esModule?n:{default:n}).default},function(t,e,i){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(3),r=(n=s)&&n.__esModule?n:{default:n};var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.draggableAttr="data-pd-draggable-item",this.containerAttr="data-pd-drop-container",this.duration=300,this.dragDelay={mouse:0,touch:200},this.cancelThreshold=4,this.dragEl=null,this.dropEl=null,this.ghostEl=null,this.groupId="",this.dragging=!1,this.touchTimeout=null,this.startPoint=null,this.movePoint=null,this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onDragTimeout=this.onDragTimeout.bind(this),this.eventOptions=this.getEventOptions(),this.body=document.body,this.scrollEl=document.scrollingElement||document.documentElement||document,this.bindPassiveEvents()}return o(t,[{key:"getEventOptions",value:function(){var t=!1;try{var e=function(){},i=Object.defineProperty({},"passive",{get:function(){return t=!0,!0}});window.addEventListener("check-passive",e,i),window.removeEventListener("check-passive",e,i)}catch(e){t=!1}return!!t&&{passive:!1}}},{key:"getPoint",value:function(t){var e=t.touch||!!t.touches&&t.touches[0];return e||(e=t),new r.default(e.clientX,e.clientY)}},{key:"getRect",value:function(t){var e=t.getBoundingClientRect();return{x:e.x||e.left,y:e.y||e.top,width:e.width,height:e.height}}},{key:"getMidpoint",value:function(t){var e=this.getRect(t);return new r.default(e.width/2+e.x,e.height/2+e.y)}},{key:"getRectDiff",value:function(t,e){var i=this.getRect(t);return{x:e.x-i.x,y:e.y-i.y,width:e.width-i.width,height:e.height-i.height}}},{key:"pointToEl",value:function(t){return document.elementFromPoint(t.x,t.y)}},{key:"each",value:function(t,e){for(var i=t.length,n=0;n<i;n++){var o=e(t[n],n);if(!0!==o&&!1===o)break}}},{key:"eachInContainers",value:function(t,e,i){var n=this;this.each(t,function(t){e(t),n.each(t.children,function(t){i(t)})})}},{key:"closest",value:function(t,e){for(;t;){if(e(t))return t;t=t.parentElement}return null}},{key:"closestByAttr",value:function(t,e,i){return this.closest(t,function(t){var n=t.getAttribute(e);return i?n===i:null!==n})}},{key:"closestContainer",value:function(t,e){return this.closestByAttr(t,this.containerAttr,e)}},{key:"closestDraggable",value:function(t,e){return this.closestByAttr(t,this.draggableAttr,e)}},{key:"addEvent",value:function(t,e){document.addEventListener(t,e,this.eventOptions)}},{key:"removeEvent",value:function(t,e){document.removeEventListener(t,e,this.eventOptions)}},{key:"bindPassiveEvents",value:function(){this.addEvent("mousedown",this.onMouseDown),this.addEvent("touchstart",this.onTouchStart)}},{key:"bindActiveEvents",value:function(){this.addEvent("mousemove",this.onMouseMove),this.addEvent("mouseup",this.onMouseUp),this.addEvent("touchmove",this.onTouchMove),this.addEvent("touchend",this.onTouchEnd)}},{key:"unbindActiveEvents",value:function(){this.removeEvent("mousemove",this.onMouseMove),this.removeEvent("mouseup",this.onMouseUp),this.removeEvent("touchmove",this.onTouchMove),this.removeEvent("touchend",this.onTouchEnd)}},{key:"onMouseDown",value:function(t){this.onDragStart(t,"mouse")}},{key:"onMouseMove",value:function(t){this.onDragMove(t,"mouse")}},{key:"onMouseUp",value:function(t){this.onDragEnd(t,"mouse")}},{key:"onTouchStart",value:function(t){this.onDragStart(t,"touch")}},{key:"onTouchMove",value:function(t){this.onDragMove(t,"touch")}},{key:"onTouchEnd",value:function(t){this.onDragEnd(t,"touch")}},{key:"onDragTimeout",value:function(){this.dragStart()}},{key:"onDragStart",value:function(t,e){var i=this.getPoint(t),n=this.closestDraggable(this.pointToEl(i));n&&(this.dragEl=n,this.startPoint=i,this.bindActiveEvents(),this.dragTimeout=setTimeout(this.onDragTimeout,this.dragDelay[e]))}},{key:"onDragMove",value:function(t){this.movePoint=this.getPoint(t),this.dragging?(t.preventDefault(),this.dragMove()):this.startPoint.checkAxisOffset(this.movePoint,this.cancelThreshold)&&this.onDragEnd(t)}},{key:"onDragEnd",value:function(){clearTimeout(this.dragTimeout),this.unbindActiveEvents(),this.dragEnd()}},{key:"createGhost",value:function(){if(null!==this.dragEl){var t=this.getRect(this.dragEl);this.ghostEl=this.dragEl.cloneNode(!0),this.ghostEl.style.position="absolute",this.ghostEl.style.top=t.y-this.startPoint.y+"px",this.ghostEl.style.left=t.x-this.startPoint.x+"px",this.ghostEl.style.width=t.width+"px",this.ghostEl.style.height=t.height+"px",this.ghostEl.style.pointerEvents="none",this.ghostEl.style.transition="",this.ghostEl.style.transform="",this.updateGhostPosition(this.startPoint),this.body.appendChild(this.ghostEl),this.ghostEl.setAttribute("data-pd-ghost","")}}},{key:"updateGhostPosition",value:function(t){var e=new r.default(this.scrollEl.scrollLeft,this.scrollEl.scrollTop).add(t);this.ghostEl.style.transform="translate("+e.x+"px, "+e.y+"px)"}},{key:"destroyGhost",value:function(){null!==this.ghostEl&&(this.body.removeChild(this.ghostEl),this.ghostEl=null)}},{key:"dragStart",value:function(){this.groupId=this.dragEl.getAttribute(this.draggableAttr),null!==this.groupId&&(this.dragging=!0,this.dropEl=this.closestContainer(this.dragEl),this.movePoint&&(this.startPoint=this.movePoint),this.createGhost(),this.dropEl.style.transition="",this.dropEl.style.height="",this.dropEl.style.width="",this.dragEl.setAttribute("data-pd-drag",""))}},{key:"dragMove",value:function(){var t=this;this.updateGhostPosition(this.movePoint);var e=this.pointToEl(this.movePoint),i=this.closestContainer(e,this.groupId);if(i&&!this.closest(i,function(e){return e===t.dragEl})){if(i!==this.dropEl){var n=this.dropEl;return this.dropEl=i,this.beforeSwap([i,n]),this.dropEl.appendChild(this.dragEl),void this.afterSwap([i,n])}var o=this.closestDraggable(e);if(o&&o!==this.dragEl&&o.parentElement===this.dropEl){var s=o.nextElementSibling,r=s||o.previousElementSibling;if(r){var h=this.getMidpoint(o),a=this.getMidpoint(r).diff(h),u=Math.abs(a.x)>Math.abs(a.y)?"x":"y";if(this.movePoint[u]<h[u]){if(this.dragEl.nextElementSibling===o)return;return this.beforeSwap([i]),this.dropEl.insertBefore(this.dragEl,o),void this.afterSwap([i])}if(s){if(this.dragEl===s)return;return this.beforeSwap([i]),this.dropEl.insertBefore(this.dragEl,s),void this.afterSwap([i])}this.beforeSwap([i]),this.dropEl.appendChild(this.dragEl),this.afterSwap([i])}}}}},{key:"dragEnd",value:function(){this.dragging=!1,this.startPoint=null,this.movePoint=null,this.groupId="",this.destroyGhost(),this.dragEl.removeAttribute("data-pd-drag"),this.dragEl=null,this.dropEl=null}},{key:"beforeSwap",value:function(t){var e=this.getRect.bind(this);this.eachInContainers(t,function(t){t._pd_elRect=e(t)},function(t){t._pd_elRect=e(t)})}},{key:"afterSwap",value:function(t){var e=this,i=this.getRectDiff.bind(this),n=this.getRect.bind(this);clearTimeout(this.animationTimeout),this.eachInContainers(t,function(t){var e=n(t);t.style.transition="none",e.height!==t._pd_elRect.height&&(t.style.height=t._pd_elRect.height+"px",t._pd_animation=!0),e.width!==t._pd_elRect.width&&(t.style.width=t._pd_elRect.width+"px",t._pd_animation=!0),t._pd_elRect=e},function(t){if(!t._pd_elRect)return!0;var e=i(t,t._pd_elRect);t.style.transition="none",0===e.y&&0===e.x||(t.style.transform="translate("+e.x+"px, "+e.y+"px)",t._pd_animation=!0),t._pd_elRect=void 0}),this.dropEl.offsetWidth,this.eachInContainers(t,function(t){t._pd_animation&&(t.style.transition="height "+e.duration+"ms ease-out, width "+e.duration+"ms ease-out",t.style.height=t._pd_elRect.height+"px",t.style.width=t._pd_elRect.width+"px",t._pd_animation=void 0),t._pd_elRect=void 0},function(t){t._pd_animation&&(t.style.transition="transform "+e.duration+"ms ease-out",t.style.transform="translate(0, 0)",t._pd_animation=void 0)}),this.animationTimeout=setTimeout(function(){e.eachInContainers(t,function(t){t.style.transition="",t.style.height="",t.style.width=""},function(t){t.style.transition="",t.style.transform=""})},this.duration)}}]),t}();e.default=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i}return n(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"diff",value:function(e){return new t(e.x-this.x,e.y-this.y)}},{key:"checkAxisOffset",value:function(t,e){return Math.abs(t.x-this.x)>e||Math.abs(t.y-this.y)>e}}]),t}();e.default=o}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RyYWdnYWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcG9pbnQuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfZHJhZ2dhYmxlIiwiRHJhZ2dhYmxlIiwiX3BvaW50IiwiUG90YXRvRHJhZ2dhYmxlIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImRyYWdnYWJsZUF0dHIiLCJjb250YWluZXJBdHRyIiwiZHVyYXRpb24iLCJkcmFnRGVsYXkiLCJtb3VzZSIsInRvdWNoIiwiY2FuY2VsVGhyZXNob2xkIiwiZHJhZ0VsIiwiZHJvcEVsIiwiZ2hvc3RFbCIsImdyb3VwSWQiLCJkcmFnZ2luZyIsInRvdWNoVGltZW91dCIsInN0YXJ0UG9pbnQiLCJtb3ZlUG9pbnQiLCJvblRvdWNoU3RhcnQiLCJvblRvdWNoTW92ZSIsIm9uVG91Y2hFbmQiLCJvbk1vdXNlRG93biIsIm9uTW91c2VNb3ZlIiwib25Nb3VzZVVwIiwib25EcmFnVGltZW91dCIsImV2ZW50T3B0aW9ucyIsImdldEV2ZW50T3B0aW9ucyIsImJvZHkiLCJkb2N1bWVudCIsInNjcm9sbEVsIiwic2Nyb2xsaW5nRWxlbWVudCIsImRvY3VtZW50RWxlbWVudCIsImJpbmRQYXNzaXZlRXZlbnRzIiwicGFzc2l2ZVN1cHBvcnQiLCJjYiIsIm9wdCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZSIsInBhc3NpdmUiLCJwb2ludCIsInRvdWNoZXMiLCJQb2ludCIsImNsaWVudFgiLCJjbGllbnRZIiwiZWwiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwieCIsImxlZnQiLCJ5IiwidG9wIiwid2lkdGgiLCJoZWlnaHQiLCJlbFJlY3QiLCJnZXRSZWN0IiwiZWxlbWVudEZyb21Qb2ludCIsImFycmF5IiwiZm4iLCJsZW5ndGgiLCJyZXN1bHQiLCJjb250YWluZXJzIiwiZHJvcEVsRm4iLCJkcmFnRWxGbiIsIl90aGlzIiwiZWFjaCIsImNvbnRhaW5lciIsImNoaWxkcmVuIiwibWF0Y2giLCJwYXJlbnRFbGVtZW50IiwiYXR0ck5hbWUiLCJhdHRyVmFsdWUiLCJjbG9zZXN0IiwiYXR0ciIsImdldEF0dHJpYnV0ZSIsImNsb3Nlc3RCeUF0dHIiLCJldmVudE5hbWUiLCJldmVudEZ1bmN0aW9uIiwiYWRkRXZlbnQiLCJyZW1vdmVFdmVudCIsIm9uRHJhZ1N0YXJ0Iiwib25EcmFnTW92ZSIsIm9uRHJhZ0VuZCIsImRyYWdTdGFydCIsInR5cGUiLCJnZXRQb2ludCIsImNsb3Nlc3REcmFnZ2FibGUiLCJwb2ludFRvRWwiLCJiaW5kQWN0aXZlRXZlbnRzIiwiZHJhZ1RpbWVvdXQiLCJzZXRUaW1lb3V0IiwicHJldmVudERlZmF1bHQiLCJkcmFnTW92ZSIsImNoZWNrQXhpc09mZnNldCIsImNsZWFyVGltZW91dCIsInVuYmluZEFjdGl2ZUV2ZW50cyIsImRyYWdFbmQiLCJkcmFnRWxSZWN0IiwiY2xvbmVOb2RlIiwic3R5bGUiLCJwb3NpdGlvbiIsInBvaW50ZXJFdmVudHMiLCJ0cmFuc2l0aW9uIiwidHJhbnNmb3JtIiwidXBkYXRlR2hvc3RQb3NpdGlvbiIsImFwcGVuZENoaWxkIiwic2V0QXR0cmlidXRlIiwibmV3UG9pbnQiLCJzY3JvbGxMZWZ0Iiwic2Nyb2xsVG9wIiwiYWRkIiwicmVtb3ZlQ2hpbGQiLCJjbG9zZXN0Q29udGFpbmVyIiwiY3JlYXRlR2hvc3QiLCJfdGhpczIiLCJvdmVyRWwiLCJwcmV2RHJvcEVsIiwiYmVmb3JlU3dhcCIsImFmdGVyU3dhcCIsIm5leHRFbCIsIm5leHRFbGVtZW50U2libGluZyIsInNpYmxpbmdFbCIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJkcmFnTWlkcG9pbnQiLCJnZXRNaWRwb2ludCIsImRpZmYiLCJheGlzIiwiTWF0aCIsImFicyIsImluc2VydEJlZm9yZSIsImRlc3Ryb3lHaG9zdCIsInJlbW92ZUF0dHJpYnV0ZSIsImVhY2hJbkNvbnRhaW5lcnMiLCJfcGRfZWxSZWN0IiwiX3RoaXMzIiwiZ2V0UmVjdERpZmYiLCJhbmltYXRpb25UaW1lb3V0IiwiX3BkX2FuaW1hdGlvbiIsImVsUmVjdERpZmYiLCJ1bmRlZmluZWQiLCJvZmZzZXRXaWR0aCIsImxpbWl0Il0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNB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RCxLQUFLaUQsMkNBR3BDVixFQUFPcUcsR0FDckIsT0FBUWQsS0FBS0MsSUFBSXhGLEVBQU1RLEVBQUkvQyxLQUFLK0MsR0FBSzZGLEdBQVNkLEtBQUtDLElBQUl4RixFQUFNVSxFQUFJakQsS0FBS2lELEdBQUsyRixxQkFJaEVuRyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0ICcuL3Njc3MvbWFpbi5zY3NzJztcbmltcG9ydCBEcmFnZ2FibGUgZnJvbSAnLi9kcmFnZ2FibGUnO1xuXG5uZXcgRHJhZ2dhYmxlKCk7XG4iLCJpbXBvcnQgUG9pbnQgZnJvbSAnLi9wb2ludCc7XG5cbmNsYXNzIFBvdGF0b0RyYWdnYWJsZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZHJhZ2dhYmxlQXR0ciA9ICdkYXRhLXBkLWRyYWdnYWJsZS1pdGVtJztcbiAgICB0aGlzLmNvbnRhaW5lckF0dHIgPSAnZGF0YS1wZC1kcm9wLWNvbnRhaW5lcic7XG4gICAgdGhpcy5kdXJhdGlvbiA9IDMwMDtcbiAgICB0aGlzLmRyYWdEZWxheSA9IHtcbiAgICAgIG1vdXNlOiAwLFxuICAgICAgdG91Y2g6IDIwMCxcbiAgICB9O1xuICAgIHRoaXMuY2FuY2VsVGhyZXNob2xkID0gNDtcblxuICAgIHRoaXMuZHJhZ0VsID0gbnVsbDtcbiAgICB0aGlzLmRyb3BFbCA9IG51bGw7XG4gICAgdGhpcy5naG9zdEVsID0gbnVsbDtcblxuICAgIHRoaXMuZ3JvdXBJZCA9ICcnO1xuXG4gICAgdGhpcy5kcmFnZ2luZyA9IGZhbHNlO1xuICAgIHRoaXMudG91Y2hUaW1lb3V0ID0gbnVsbDtcbiAgICB0aGlzLnN0YXJ0UG9pbnQgPSBudWxsO1xuICAgIHRoaXMubW92ZVBvaW50ID0gbnVsbDtcblxuICAgIFxuICAgIHRoaXMub25Ub3VjaFN0YXJ0ID0gdGhpcy5vblRvdWNoU3RhcnQuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uVG91Y2hNb3ZlID0gdGhpcy5vblRvdWNoTW92ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25Ub3VjaEVuZCA9IHRoaXMub25Ub3VjaEVuZC5iaW5kKHRoaXMpO1xuICAgIFxuICAgIHRoaXMub25Nb3VzZURvd24gPSB0aGlzLm9uTW91c2VEb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbk1vdXNlTW92ZSA9IHRoaXMub25Nb3VzZU1vdmUuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uTW91c2VVcCA9IHRoaXMub25Nb3VzZVVwLmJpbmQodGhpcyk7XG5cbiAgICB0aGlzLm9uRHJhZ1RpbWVvdXQgPSB0aGlzLm9uRHJhZ1RpbWVvdXQuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuZXZlbnRPcHRpb25zID0gdGhpcy5nZXRFdmVudE9wdGlvbnMoKTtcbiAgICBcbiAgICB0aGlzLmJvZHkgPSBkb2N1bWVudC5ib2R5O1xuICAgIHRoaXMuc2Nyb2xsRWwgPSBkb2N1bWVudC5zY3JvbGxpbmdFbGVtZW50IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCB8fCBkb2N1bWVudDtcblxuICAgIHRoaXMuYmluZFBhc3NpdmVFdmVudHMoKTtcbiAgfVxuXG4gIGdldEV2ZW50T3B0aW9ucygpIHtcbiAgICBsZXQgcGFzc2l2ZVN1cHBvcnQgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY2IgPSAoKSA9PiB7fTtcbiAgICAgIGNvbnN0IG9wdCA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSwgJ3Bhc3NpdmUnLCB7XG4gICAgICAgIGdldCgpIHsgcGFzc2l2ZVN1cHBvcnQgPSB0cnVlOyByZXR1cm4gdHJ1ZTsgfVxuICAgICAgfSk7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2hlY2stcGFzc2l2ZScsIGNiLCBvcHQpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoZWNrLXBhc3NpdmUnLCBjYiwgb3B0KTtcbiAgICB9IGNhdGNoIChlKSB7IHBhc3NpdmVTdXBwb3J0ID0gZmFsc2U7IH1cbiAgICByZXR1cm4gcGFzc2l2ZVN1cHBvcnQgPyB7IHBhc3NpdmU6IGZhbHNlIH0gOiBmYWxzZTtcbiAgfVxuXG4gIGdldFBvaW50KGUpIHtcbiAgICBsZXQgcG9pbnQgPSBlLnRvdWNoIHx8IChlLnRvdWNoZXMgPyBlLnRvdWNoZXNbIDAgXSA6IGZhbHNlKTtcbiAgICBpZiAoIXBvaW50KSBwb2ludCA9IGU7XG4gICAgcmV0dXJuIG5ldyBQb2ludChwb2ludC5jbGllbnRYLCBwb2ludC5jbGllbnRZKTtcbiAgfVxuXG4gIGdldFJlY3QoZWwpIHtcbiAgICBjb25zdCByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IHJlY3QueCB8fCByZWN0LmxlZnQsXG4gICAgICB5OiByZWN0LnkgfHwgcmVjdC50b3AsXG4gICAgICB3aWR0aDogcmVjdC53aWR0aCxcbiAgICAgIGhlaWdodDogcmVjdC5oZWlnaHQsXG4gICAgfTtcbiAgfVxuXG4gIGdldE1pZHBvaW50KGVsKSB7XG4gICAgY29uc3QgZWxSZWN0ID0gdGhpcy5nZXRSZWN0KGVsKTtcbiAgICByZXR1cm4gbmV3IFBvaW50KGVsUmVjdC53aWR0aCAvIDIgKyBlbFJlY3QueCwgZWxSZWN0LmhlaWdodCAvIDIgKyBlbFJlY3QueSk7XG4gIH1cblxuICBnZXRSZWN0RGlmZihlbCwgZWxSZWN0KSB7XG4gICAgY29uc3QgcmVjdCA9IHRoaXMuZ2V0UmVjdChlbCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IGVsUmVjdC54IC0gcmVjdC54LFxuICAgICAgeTogZWxSZWN0LnkgLSByZWN0LnksXG4gICAgICB3aWR0aDogZWxSZWN0LndpZHRoIC0gcmVjdC53aWR0aCxcbiAgICAgIGhlaWdodDogZWxSZWN0LmhlaWdodCAtIHJlY3QuaGVpZ2h0LFxuICAgIH07XG4gIH1cblxuICBwb2ludFRvRWwocG9pbnQpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChwb2ludC54LCBwb2ludC55KTtcbiAgfVxuXG4gIGVhY2goYXJyYXksIGZuKSB7XG4gICAgY29uc3QgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGZuKGFycmF5W2ldLCBpKTtcbiAgICAgIGlmIChyZXN1bHQgPT09IHRydWUpIGNvbnRpbnVlO1xuICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGVhY2hJbkNvbnRhaW5lcnMoY29udGFpbmVycywgZHJvcEVsRm4sIGRyYWdFbEZuKSB7XG4gICAgdGhpcy5lYWNoKGNvbnRhaW5lcnMsIGNvbnRhaW5lciA9PiB7XG4gICAgICBkcm9wRWxGbihjb250YWluZXIpO1xuICAgICAgdGhpcy5lYWNoKGNvbnRhaW5lci5jaGlsZHJlbiwgZWwgPT4ge1xuICAgICAgICBkcmFnRWxGbihlbCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3Nlc3QoZWwsIG1hdGNoKSB7XG4gICAgZm9yICg7ZWw7KSB7XG4gICAgICBpZiAobWF0Y2goZWwpKSByZXR1cm4gZWw7XG4gICAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY2xvc2VzdEJ5QXR0cihlbCwgYXR0ck5hbWUsIGF0dHJWYWx1ZSkge1xuICAgIHJldHVybiB0aGlzLmNsb3Nlc3QoZWwsIChlbCkgPT4ge1xuICAgICAgY29uc3QgYXR0ciA9IGVsLmdldEF0dHJpYnV0ZShhdHRyTmFtZSk7XG4gICAgICByZXR1cm4gYXR0clZhbHVlID8gYXR0ciA9PT0gYXR0clZhbHVlIDogYXR0ciAhPT0gbnVsbDtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3Nlc3RDb250YWluZXIoZWwsIGdyb3VwSWQpIHtcbiAgICByZXR1cm4gdGhpcy5jbG9zZXN0QnlBdHRyKGVsLCB0aGlzLmNvbnRhaW5lckF0dHIsIGdyb3VwSWQpO1xuICB9XG5cbiAgY2xvc2VzdERyYWdnYWJsZShlbCwgZ3JvdXBJZCkge1xuICAgIHJldHVybiB0aGlzLmNsb3Nlc3RCeUF0dHIoZWwsIHRoaXMuZHJhZ2dhYmxlQXR0ciwgZ3JvdXBJZCk7XG4gIH1cblxuICBhZGRFdmVudChldmVudE5hbWUsIGV2ZW50RnVuY3Rpb24pIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgZXZlbnRGdW5jdGlvbiwgdGhpcy5ldmVudE9wdGlvbnMpO1xuICB9XG5cbiAgcmVtb3ZlRXZlbnQoZXZlbnROYW1lLCBldmVudEZ1bmN0aW9uKSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGV2ZW50RnVuY3Rpb24sIHRoaXMuZXZlbnRPcHRpb25zKTtcbiAgfVxuXG4gIGJpbmRQYXNzaXZlRXZlbnRzKCkge1xuICAgIHRoaXMuYWRkRXZlbnQoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pO1xuICAgIHRoaXMuYWRkRXZlbnQoJ3RvdWNoc3RhcnQnLCB0aGlzLm9uVG91Y2hTdGFydCk7XG4gIH1cblxuICBiaW5kQWN0aXZlRXZlbnRzKCkge1xuICAgIHRoaXMuYWRkRXZlbnQoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUpO1xuICAgIHRoaXMuYWRkRXZlbnQoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCk7XG4gICAgdGhpcy5hZGRFdmVudCgndG91Y2htb3ZlJywgdGhpcy5vblRvdWNoTW92ZSk7XG4gICAgdGhpcy5hZGRFdmVudCgndG91Y2hlbmQnLCB0aGlzLm9uVG91Y2hFbmQpO1xuICB9XG5cbiAgdW5iaW5kQWN0aXZlRXZlbnRzKCkge1xuICAgIHRoaXMucmVtb3ZlRXZlbnQoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUpO1xuICAgIHRoaXMucmVtb3ZlRXZlbnQoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCk7XG4gICAgdGhpcy5yZW1vdmVFdmVudCgndG91Y2htb3ZlJywgdGhpcy5vblRvdWNoTW92ZSk7XG4gICAgdGhpcy5yZW1vdmVFdmVudCgndG91Y2hlbmQnLCB0aGlzLm9uVG91Y2hFbmQpO1xuICB9XG5cbiAgb25Nb3VzZURvd24oZSkge1xuICAgIHRoaXMub25EcmFnU3RhcnQoZSwgJ21vdXNlJyk7XG4gIH1cbiAgXG4gIG9uTW91c2VNb3ZlKGUpIHtcbiAgICB0aGlzLm9uRHJhZ01vdmUoZSwgJ21vdXNlJyk7XG4gIH1cblxuICBvbk1vdXNlVXAoZSkge1xuICAgIHRoaXMub25EcmFnRW5kKGUsICdtb3VzZScpO1xuICB9XG5cbiAgb25Ub3VjaFN0YXJ0KGUpIHtcbiAgICB0aGlzLm9uRHJhZ1N0YXJ0KGUsICd0b3VjaCcpO1xuICB9XG5cbiAgb25Ub3VjaE1vdmUoZSkge1xuICAgIHRoaXMub25EcmFnTW92ZShlLCAndG91Y2gnKTtcbiAgfVxuXG4gIG9uVG91Y2hFbmQoZSkge1xuICAgIHRoaXMub25EcmFnRW5kKGUsICd0b3VjaCcpO1xuICB9XG5cbiAgb25EcmFnVGltZW91dCgpIHtcbiAgICB0aGlzLmRyYWdTdGFydCgpO1xuICB9XG5cbiAgb25EcmFnU3RhcnQoZSwgdHlwZSkge1xuICAgIGNvbnN0IHBvaW50ID0gdGhpcy5nZXRQb2ludChlKTtcblxuICAgIGNvbnN0IGRyYWdFbCA9IHRoaXMuY2xvc2VzdERyYWdnYWJsZSh0aGlzLnBvaW50VG9FbChwb2ludCkpO1xuICAgIGlmICghZHJhZ0VsKSByZXR1cm47XG5cbiAgICB0aGlzLmRyYWdFbCA9IGRyYWdFbDtcbiAgICB0aGlzLnN0YXJ0UG9pbnQgPSBwb2ludDtcblxuICAgIHRoaXMuYmluZEFjdGl2ZUV2ZW50cygpO1xuICAgIHRoaXMuZHJhZ1RpbWVvdXQgPSBzZXRUaW1lb3V0KHRoaXMub25EcmFnVGltZW91dCwgdGhpcy5kcmFnRGVsYXlbdHlwZV0pO1xuICB9XG5cbiAgb25EcmFnTW92ZShlKSB7XG4gICAgdGhpcy5tb3ZlUG9pbnQgPSB0aGlzLmdldFBvaW50KGUpO1xuXG4gICAgaWYgKCF0aGlzLmRyYWdnaW5nKSB7XG4gICAgICBpZiAodGhpcy5zdGFydFBvaW50LmNoZWNrQXhpc09mZnNldCh0aGlzLm1vdmVQb2ludCwgdGhpcy5jYW5jZWxUaHJlc2hvbGQpKSB7XG4gICAgICAgIHRoaXMub25EcmFnRW5kKGUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuZHJhZ01vdmUoKTtcbiAgfVxuXG4gIG9uRHJhZ0VuZCgpIHtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5kcmFnVGltZW91dCk7XG4gICAgdGhpcy51bmJpbmRBY3RpdmVFdmVudHMoKTtcbiAgICB0aGlzLmRyYWdFbmQoKTtcbiAgfVxuXG4gIGNyZWF0ZUdob3N0KCkge1xuICAgIGlmICh0aGlzLmRyYWdFbCA9PT0gbnVsbCkgcmV0dXJuO1xuXG4gICAgY29uc3QgZHJhZ0VsUmVjdCA9IHRoaXMuZ2V0UmVjdCh0aGlzLmRyYWdFbCk7XG4gICAgdGhpcy5naG9zdEVsID0gdGhpcy5kcmFnRWwuY2xvbmVOb2RlKHRydWUpO1xuICAgIHRoaXMuZ2hvc3RFbC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgdGhpcy5naG9zdEVsLnN0eWxlLnRvcCA9IGAkeyhkcmFnRWxSZWN0LnkgLSB0aGlzLnN0YXJ0UG9pbnQueSl9cHhgO1xuICAgIHRoaXMuZ2hvc3RFbC5zdHlsZS5sZWZ0ID0gYCR7KGRyYWdFbFJlY3QueCAtIHRoaXMuc3RhcnRQb2ludC54KX1weGA7XG4gICAgdGhpcy5naG9zdEVsLnN0eWxlLndpZHRoID0gYCR7ZHJhZ0VsUmVjdC53aWR0aH1weGA7XG4gICAgdGhpcy5naG9zdEVsLnN0eWxlLmhlaWdodCA9IGAke2RyYWdFbFJlY3QuaGVpZ2h0fXB4YDtcbiAgICB0aGlzLmdob3N0RWwuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcblxuICAgIC8vIHJlc2V0IGFmdGVyIGFuaW1hdGlvblxuICAgIHRoaXMuZ2hvc3RFbC5zdHlsZS50cmFuc2l0aW9uID0gJyc7XG4gICAgdGhpcy5naG9zdEVsLnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuXG4gICAgdGhpcy51cGRhdGVHaG9zdFBvc2l0aW9uKHRoaXMuc3RhcnRQb2ludCk7XG5cbiAgICB0aGlzLmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5naG9zdEVsKTtcblxuICAgIHRoaXMuZ2hvc3RFbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGQtZ2hvc3QnLCAnJyk7XG4gIH1cblxuICB1cGRhdGVHaG9zdFBvc2l0aW9uKHBvaW50KSB7XG4gICAgY29uc3QgbmV3UG9pbnQgPSBuZXcgUG9pbnQodGhpcy5zY3JvbGxFbC5zY3JvbGxMZWZ0LCB0aGlzLnNjcm9sbEVsLnNjcm9sbFRvcCkuYWRkKHBvaW50KTtcbiAgICB0aGlzLmdob3N0RWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZSgke25ld1BvaW50Lnh9cHgsICR7bmV3UG9pbnQueX1weClgO1xuICB9XG5cbiAgZGVzdHJveUdob3N0KCkge1xuICAgIGlmICh0aGlzLmdob3N0RWwgPT09IG51bGwpIHJldHVybjtcblxuICAgIHRoaXMuYm9keS5yZW1vdmVDaGlsZCh0aGlzLmdob3N0RWwpO1xuXG4gICAgdGhpcy5naG9zdEVsID0gbnVsbDtcbiAgfVxuXG4gIGRyYWdTdGFydCgpIHsgICAgXG4gICAgdGhpcy5ncm91cElkID0gdGhpcy5kcmFnRWwuZ2V0QXR0cmlidXRlKHRoaXMuZHJhZ2dhYmxlQXR0cik7XG4gICAgaWYgKHRoaXMuZ3JvdXBJZCA9PT0gbnVsbCkgcmV0dXJuOyAvLyBwcm9iYWJseSBub3QgbmVjZXNzYXJ5XG5cbiAgICB0aGlzLmRyYWdnaW5nID0gdHJ1ZTtcblxuICAgIHRoaXMuZHJvcEVsID0gdGhpcy5jbG9zZXN0Q29udGFpbmVyKHRoaXMuZHJhZ0VsKTtcbiAgICBpZiAodGhpcy5tb3ZlUG9pbnQpIHRoaXMuc3RhcnRQb2ludCA9IHRoaXMubW92ZVBvaW50O1xuXG4gICAgdGhpcy5jcmVhdGVHaG9zdCgpO1xuXG4gICAgLy8gcmVzZXQgYWZ0ZXIgYW5pbWF0aW9uXG4gICAgdGhpcy5kcm9wRWwuc3R5bGUudHJhbnNpdGlvbiA9ICcnO1xuICAgIHRoaXMuZHJvcEVsLnN0eWxlLmhlaWdodCA9ICcnO1xuICAgIHRoaXMuZHJvcEVsLnN0eWxlLndpZHRoID0gJyc7XG5cbiAgICB0aGlzLmRyYWdFbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcGQtZHJhZycsICcnKTtcbiAgfVxuXG4gIGRyYWdNb3ZlKCkge1xuICAgIHRoaXMudXBkYXRlR2hvc3RQb3NpdGlvbih0aGlzLm1vdmVQb2ludCk7XG5cbiAgICBjb25zdCBvdmVyRWwgPSB0aGlzLnBvaW50VG9FbCh0aGlzLm1vdmVQb2ludCk7XG5cbiAgICBjb25zdCBkcm9wRWwgPSB0aGlzLmNsb3Nlc3RDb250YWluZXIob3ZlckVsLCB0aGlzLmdyb3VwSWQpO1xuICAgIGlmICghZHJvcEVsKSByZXR1cm47XG5cbiAgICAvLyBkcm9wRWwgaW5zaWRlIGRyYWdFbFxuICAgIGlmICh0aGlzLmNsb3Nlc3QoZHJvcEVsLCBlbCA9PiBlbCA9PT0gdGhpcy5kcmFnRWwpKSByZXR1cm47XG5cbiAgICAvLyBvdGhlciBkcm9wRWxcbiAgICBpZiAoZHJvcEVsICE9PSB0aGlzLmRyb3BFbCkge1xuICAgICAgY29uc3QgcHJldkRyb3BFbCA9IHRoaXMuZHJvcEVsO1xuICAgICAgdGhpcy5kcm9wRWwgPSBkcm9wRWw7XG5cbiAgICAgIHRoaXMuYmVmb3JlU3dhcChbZHJvcEVsLCBwcmV2RHJvcEVsXSk7XG4gICAgICB0aGlzLmRyb3BFbC5hcHBlbmRDaGlsZCh0aGlzLmRyYWdFbCk7XG4gICAgICB0aGlzLmFmdGVyU3dhcChbZHJvcEVsLCBwcmV2RHJvcEVsXSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZHJhZ0VsID0gdGhpcy5jbG9zZXN0RHJhZ2dhYmxlKG92ZXJFbCk7XG4gICAgaWYgKCFkcmFnRWwpIHJldHVybjtcblxuICAgIC8vIHRoZSBzYW1lIGRyYWdFbFxuICAgIGlmIChkcmFnRWwgPT09IHRoaXMuZHJhZ0VsKSByZXR1cm47XG5cbiAgICAvLyBvdGhlciBkcm9wRWwsIGl0IHNob3VsZCBiZSB0aGUgc2FtZVxuICAgIGlmIChkcmFnRWwucGFyZW50RWxlbWVudCAhPT0gdGhpcy5kcm9wRWwgKSByZXR1cm47XG5cbiAgICBjb25zdCBuZXh0RWwgPSBkcmFnRWwubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIGNvbnN0IHNpYmxpbmdFbCA9IG5leHRFbCB8fCBkcmFnRWwucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICBpZiAoIXNpYmxpbmdFbCkgcmV0dXJuO1xuXG4gICAgY29uc3QgZHJhZ01pZHBvaW50ID0gdGhpcy5nZXRNaWRwb2ludChkcmFnRWwpO1xuICAgIGNvbnN0IGRpZmYgPSB0aGlzLmdldE1pZHBvaW50KHNpYmxpbmdFbCkuZGlmZihkcmFnTWlkcG9pbnQpO1xuICAgIGNvbnN0IGF4aXMgPSBNYXRoLmFicyhkaWZmLngpID4gTWF0aC5hYnMoZGlmZi55KSA/ICd4JyA6ICd5JztcblxuICAgIGlmICh0aGlzLm1vdmVQb2ludFtheGlzXSA8IGRyYWdNaWRwb2ludFtheGlzXSkge1xuICAgICAgLy8gcHJldmVudCB1bm5lY2Vzc2FyeSBpbnNlcnRcbiAgICAgIGlmICh0aGlzLmRyYWdFbC5uZXh0RWxlbWVudFNpYmxpbmcgPT09IGRyYWdFbCkgcmV0dXJuO1xuXG4gICAgICB0aGlzLmJlZm9yZVN3YXAoW2Ryb3BFbF0pO1xuICAgICAgdGhpcy5kcm9wRWwuaW5zZXJ0QmVmb3JlKHRoaXMuZHJhZ0VsLCBkcmFnRWwpO1xuICAgICAgdGhpcy5hZnRlclN3YXAoW2Ryb3BFbF0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChuZXh0RWwpIHtcbiAgICAgIC8vIHByZXZlbnQgdW5uZWNlc3NhcnkgaW5zZXJ0XG4gICAgICBpZiAodGhpcy5kcmFnRWwgPT09IG5leHRFbCkgcmV0dXJuO1xuXG4gICAgICB0aGlzLmJlZm9yZVN3YXAoW2Ryb3BFbF0pO1xuICAgICAgdGhpcy5kcm9wRWwuaW5zZXJ0QmVmb3JlKHRoaXMuZHJhZ0VsLCBuZXh0RWwpO1xuICAgICAgdGhpcy5hZnRlclN3YXAoW2Ryb3BFbF0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHRoZSBsYXN0IGluIGNvbnRhaW5lclxuICAgIHRoaXMuYmVmb3JlU3dhcChbZHJvcEVsXSk7XG4gICAgdGhpcy5kcm9wRWwuYXBwZW5kQ2hpbGQodGhpcy5kcmFnRWwpO1xuICAgIHRoaXMuYWZ0ZXJTd2FwKFtkcm9wRWxdKTtcbiAgfVxuXG4gIGRyYWdFbmQoKSB7XG4gICAgdGhpcy5kcmFnZ2luZyA9IGZhbHNlO1xuICAgIHRoaXMuc3RhcnRQb2ludCA9IG51bGw7XG4gICAgdGhpcy5tb3ZlUG9pbnQgPSBudWxsO1xuXG4gICAgdGhpcy5ncm91cElkID0gJyc7XG5cbiAgICB0aGlzLmRlc3Ryb3lHaG9zdCgpO1xuXG4gICAgdGhpcy5kcmFnRWwucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXBkLWRyYWcnKTtcbiAgICB0aGlzLmRyYWdFbCA9IG51bGw7XG4gICAgdGhpcy5kcm9wRWwgPSBudWxsO1xuICB9XG5cbiAgYmVmb3JlU3dhcChjb250YWluZXJzKSB7XG4gICAgY29uc3QgZ2V0UmVjdCA9IHRoaXMuZ2V0UmVjdC5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5lYWNoSW5Db250YWluZXJzKGNvbnRhaW5lcnMsIGRyb3BFbCA9PiB7XG4gICAgICBkcm9wRWwuX3BkX2VsUmVjdCA9IGdldFJlY3QoZHJvcEVsKTtcbiAgICB9LCBkcmFnRWwgPT4ge1xuICAgICAgZHJhZ0VsLl9wZF9lbFJlY3QgPSBnZXRSZWN0KGRyYWdFbCk7XG4gICAgfSk7XG4gIH1cblxuICBhZnRlclN3YXAoY29udGFpbmVycykge1xuICAgIGNvbnN0IGdldFJlY3REaWZmID0gdGhpcy5nZXRSZWN0RGlmZi5iaW5kKHRoaXMpLCBnZXRSZWN0ID0gdGhpcy5nZXRSZWN0LmJpbmQodGhpcyk7XG5cbiAgICBjbGVhclRpbWVvdXQodGhpcy5hbmltYXRpb25UaW1lb3V0KTtcblxuICAgIHRoaXMuZWFjaEluQ29udGFpbmVycyhjb250YWluZXJzLCBkcm9wRWwgPT4ge1xuICAgICAgY29uc3QgZWxSZWN0ID0gZ2V0UmVjdChkcm9wRWwpO1xuICAgICAgZHJvcEVsLnN0eWxlLnRyYW5zaXRpb24gPSAnbm9uZSc7XG4gICAgICBpZiAoZWxSZWN0LmhlaWdodCAhPT0gZHJvcEVsLl9wZF9lbFJlY3QuaGVpZ2h0KSB7XG4gICAgICAgIGRyb3BFbC5zdHlsZS5oZWlnaHQgPSBgJHtkcm9wRWwuX3BkX2VsUmVjdC5oZWlnaHR9cHhgO1xuICAgICAgICBkcm9wRWwuX3BkX2FuaW1hdGlvbiA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoZWxSZWN0LndpZHRoICE9PSBkcm9wRWwuX3BkX2VsUmVjdC53aWR0aCkge1xuICAgICAgICBkcm9wRWwuc3R5bGUud2lkdGggPSBgJHtkcm9wRWwuX3BkX2VsUmVjdC53aWR0aH1weGA7XG4gICAgICAgIGRyb3BFbC5fcGRfYW5pbWF0aW9uID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGRyb3BFbC5fcGRfZWxSZWN0ID0gZWxSZWN0O1xuICAgIH0sIGRyYWdFbCA9PiB7XG4gICAgICBpZiAoIWRyYWdFbC5fcGRfZWxSZWN0KSByZXR1cm4gdHJ1ZTtcbiAgICAgIGNvbnN0IGVsUmVjdERpZmYgPSBnZXRSZWN0RGlmZihkcmFnRWwsIGRyYWdFbC5fcGRfZWxSZWN0KTtcbiAgICAgIGRyYWdFbC5zdHlsZS50cmFuc2l0aW9uID0gJ25vbmUnO1xuICAgICAgaWYgKGVsUmVjdERpZmYueSAhPT0gMCB8fCBlbFJlY3REaWZmLnggIT09IDApIHtcbiAgICAgICAgZHJhZ0VsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUoJHtlbFJlY3REaWZmLnh9cHgsICR7ZWxSZWN0RGlmZi55fXB4KWA7XG4gICAgICAgIGRyYWdFbC5fcGRfYW5pbWF0aW9uID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGRyYWdFbC5fcGRfZWxSZWN0ID0gdW5kZWZpbmVkO1xuICAgIH0pO1xuXG4gICAgdGhpcy5kcm9wRWwub2Zmc2V0V2lkdGg7IC8vIGZvcmNlIHJlZmxvd1xuXG4gICAgdGhpcy5lYWNoSW5Db250YWluZXJzKGNvbnRhaW5lcnMsIGRyb3BFbCA9PiB7XG4gICAgICBpZiAoZHJvcEVsLl9wZF9hbmltYXRpb24pIHtcbiAgICAgICAgZHJvcEVsLnN0eWxlLnRyYW5zaXRpb24gPSBgaGVpZ2h0ICR7dGhpcy5kdXJhdGlvbn1tcyBlYXNlLW91dCwgd2lkdGggJHt0aGlzLmR1cmF0aW9ufW1zIGVhc2Utb3V0YDtcbiAgICAgICAgZHJvcEVsLnN0eWxlLmhlaWdodCA9IGAke2Ryb3BFbC5fcGRfZWxSZWN0LmhlaWdodH1weGA7XG4gICAgICAgIGRyb3BFbC5zdHlsZS53aWR0aCA9IGAke2Ryb3BFbC5fcGRfZWxSZWN0LndpZHRofXB4YDtcbiAgICAgICAgZHJvcEVsLl9wZF9hbmltYXRpb24gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICBkcm9wRWwuX3BkX2VsUmVjdCA9IHVuZGVmaW5lZDtcbiAgICB9LCBkcmFnRWwgPT4ge1xuICAgICAgaWYgKGRyYWdFbC5fcGRfYW5pbWF0aW9uKSB7XG4gICAgICAgIGRyYWdFbC5zdHlsZS50cmFuc2l0aW9uID0gYHRyYW5zZm9ybSAke3RoaXMuZHVyYXRpb259bXMgZWFzZS1vdXRgO1xuICAgICAgICBkcmFnRWwuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZSgwLCAwKSc7XG4gICAgICAgIGRyYWdFbC5fcGRfYW5pbWF0aW9uID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5hbmltYXRpb25UaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmVhY2hJbkNvbnRhaW5lcnMoY29udGFpbmVycywgZHJvcEVsID0+IHtcbiAgICAgICAgZHJvcEVsLnN0eWxlLnRyYW5zaXRpb24gPSAnJztcbiAgICAgICAgZHJvcEVsLnN0eWxlLmhlaWdodCA9ICcnO1xuICAgICAgICBkcm9wRWwuc3R5bGUud2lkdGggPSAnJztcbiAgICAgIH0sIGRyYWdFbCA9PiB7XG4gICAgICAgIGRyYWdFbC5zdHlsZS50cmFuc2l0aW9uID0gJyc7XG4gICAgICAgIGRyYWdFbC5zdHlsZS50cmFuc2Zvcm0gPSAnJztcbiAgICAgIH0pO1xuICAgIH0sIHRoaXMuZHVyYXRpb24pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvdGF0b0RyYWdnYWJsZTtcbiIsImNsYXNzIFBvaW50IHtcbiAgY29uc3RydWN0b3IoeCwgeSkge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgfVxuXG4gIGNsb25lKCkge1xuICAgIHJldHVybiBuZXcgUG9pbnQodGhpcy54LCB0aGlzLnkpO1xuICB9XG5cbiAgYWRkKHBvaW50KSB7XG4gICAgdGhpcy54ICs9IHBvaW50Lng7XG4gICAgdGhpcy55ICs9IHBvaW50Lnk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBkaWZmKHBvaW50KSB7XG4gICAgcmV0dXJuIG5ldyBQb2ludChwb2ludC54IC0gdGhpcy54LCBwb2ludC55IC0gdGhpcy55KTtcbiAgfVxuXG4gIGNoZWNrQXhpc09mZnNldChwb2ludCwgbGltaXQpIHtcbiAgICByZXR1cm4gKE1hdGguYWJzKHBvaW50LnggLSB0aGlzLngpID4gbGltaXQgfHwgTWF0aC5hYnMocG9pbnQueSAtIHRoaXMueSkgPiBsaW1pdCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9pbnQ7XG4iXSwic291cmNlUm9vdCI6IiJ9